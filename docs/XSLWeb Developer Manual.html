<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="description" content="XSLWeb Developer Manual">
<meta name="keywords" content="XSLWeb XML, XSLT, XML Schema, Schematron, Web development">
<meta name="author" content="Authors: Maarten Kroon, Arjan Loeffen">
<title>XSLWeb version 3.2.2 Developer Manual</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://hypothes.is/embed.js" async></script>
<link rel="stylesheet" href="css/custom-styles.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>XSLWeb version 3.2.2 Developer Manual</h1>
<div class="details">
<span id="author" class="author">Authors: Maarten Kroon, Arjan Loeffen</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#fundamentals">1. The fundamentals of XSLWeb</a>
<ul class="sectlevel2">
<li><a href="#introduction">1.1. Introduction</a></li>
<li><a href="#request-xml">1.2. The Request XML</a></li>
<li><a href="#response-xml">1.3. The Response XML</a></li>
<li><a href="#request-dispatcher">1.4. The Request dispatcher XSLT stylesheet</a></li>
<li><a href="#pipeline">1.5. The pipeline transformation stylesheets</a></li>
<li><a href="#web-applications">1.6. Web applications</a></li>
</ul>
</li>
<li><a href="#pipeline-steps">2. Pipeline steps</a>
<ul class="sectlevel2">
<li><a href="#transformation-pipeline-steps">2.1. Transformation pipeline steps</a>
<ul class="sectlevel3">
<li><a href="#transformer-step">2.1.1. transformer step</a></li>
<li><a href="#query-step">2.1.2. query step</a></li>
<li><a href="#transformer-stx-step">2.1.3. transformer-stx step</a></li>
<li><a href="#extensions">2.1.4. Extensions</a></li>
</ul>
</li>
<li><a href="#validation-pipeline-steps">2.2. Validation pipeline steps</a>
<ul class="sectlevel3">
<li><a href="#schema-validator-step">2.2.1. schema-validator step</a></li>
<li><a href="#schematron-validator-step">2.2.2. schematron-validator step</a></li>
</ul>
</li>
<li><a href="#serialization-pipeline-steps">2.3. Serialization pipeline steps</a>
<ul class="sectlevel3">
<li><a href="#json-serializer-step">2.3.1. json-serializer step</a></li>
<li><a href="#zip-serializer-step">2.3.2. zip-serializer step</a></li>
<li><a href="#resource-serializer-step">2.3.3. resource-serializer step</a></li>
<li><a href="#fop-serializer-step">2.3.4. fop-serializer step</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#stylesheet-parameters">3. Stylesheet parameters</a></li>
<li><a href="#nested-pipelines">4. Nested pipelines</a></li>
<li><a href="#development-mode">5. Development mode and production mode</a></li>
<li><a href="#logging">6. Logging</a></li>
<li><a href="#response-caching">7. Response caching</a></li>
<li><a href="#job-scheduling">8. Job scheduling</a></li>
<li><a href="#user-authentication">9. User authentication</a></li>
<li><a href="#global-properties">10. Global configuration properties</a></li>
<li><a href="#xpath-extension-function-library">11. XPath extension function library</a>
<ul class="sectlevel2">
<li><a href="#built-in-extension-functions">11.1. Built in extension functions</a></li>
<li><a href="#response-functions">11.2. Response functions</a></li>
<li><a href="#session-functions">11.3. Session functions</a></li>
<li><a href="#webapp-functions">11.4. Webapp functions</a></li>
<li><a href="#context-functions">11.5. Context functions</a></li>
<li><a href="#expath-file-functions">11.6. EXPath File</a></li>
<li><a href="#expath-http-client-functions">11.7. EXPath HTTP Client</a></li>
<li><a href="#base64-functions">11.8. Base64</a></li>
<li><a href="#external-functions">11.9. Execute external processes</a></li>
<li><a href="#logging-functions">11.10. Logging functions</a></li>
<li><a href="#email-functions">11.11. Email</a></li>
<li><a href="#serialization-functions">11.12. Serialization</a></li>
<li><a href="#caching-functions">11.13. Caching</a></li>
<li><a href="#image-processing-functions">11.14. Image processing</a></li>
<li><a href="#io-functions">11.15. Input/Output</a></li>
<li><a href="#util-functions">11.16. Utilities</a></li>
<li><a href="#zip-functions">11.17. Zip/Unzip</a></li>
<li><a href="#uuid-functions">11.18. UUID</a></li>
<li><a href="#json-functions">11.19. JSON</a></li>
<li><a href="#dynfunc-functions">11.20. Dynamic (scripted) extension functions</a></li>
<li><a href="#sql-functions">11.21. SQL</a></li>
<li><a href="#custom-extension-functions">11.22. Custom extension functions</a></li>
<li><a href="#side-effects">11.23. Extension functions with side effects</a></li>
</ul>
</li>
<li><a href="#install">12. Download, install and run XSLWeb</a>
<ul class="sectlevel2">
<li><a href="#install-jar">12.1. The single executable jar distribution</a>
<ul class="sectlevel3">
<li><a href="#download">12.1.1. Download</a></li>
<li><a href="#install-2">12.1.2. Install</a></li>
<li><a href="#run">12.1.3. Run</a></li>
</ul>
</li>
<li><a href="#install-war">12.2. The Web Application Archive (.war) distribution</a>
<ul class="sectlevel3">
<li><a href="#download-2">12.2.1. Download</a></li>
<li><a href="#install-3">12.2.2. Install</a></li>
<li><a href="#run-2">12.2.3. Run</a></li>
</ul>
</li>
<li><a href="#install-xslweb-as-a-windows-service-or-linuxmacos-daemon">12.3. Install XSLWeb as a Windows service or Linux/macOS daemon</a></li>
</ul>
</li>
<li><a href="#support-for-saxon-pe-professional-and-ee-enterprise-edition">13. Support for Saxon PE (Professional) and EE (Enterprise Edition)</a></li>
<li><a href="#appendix-request-xml-example">14. Appendix A: Request XML example</a></li>
<li><a href="#appendix-response-xml-example">15. Appendix B: Response XML example</a></li>
<li><a href="#appendix-webapp-xml-example">16. Appendix C: Webapp XML example</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="small">The latest version of this document can be found <a href="https://github.com/Armatiek/xslweb/raw/master/docs/XSLWeb%20Developer%20Manual.html">here</a>.</span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fundamentals"><a class="anchor" href="#fundamentals"></a><a class="link" href="#fundamentals">1. The fundamentals of XSLWeb</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction"><a class="anchor" href="#introduction"></a><a class="link" href="#introduction">1.1. Introduction</a></h3>
<div class="paragraph">
<p>XSLWeb is an open source and free to use web development framework for XSLT and XQuery developers. It is based on concepts similar to frameworks like <a href="http://cocoon.apache.org/">Cocoon</a> and <a href="http://servlex.net">Servlex</a>, but aims to be more easily accessible and pragmatic.</p>
</div>
<div class="paragraph">
<p>Using XSLWeb, XSLT/XQuery developers can develop both web applications (dynamic websites) and web services. In essence, an XSLWeb web application is one or more XSLT stylesheets (version 1.0, 2.0 or 3.0) or XQueries (version 1.0, 3.0 or 3.1) that transform an XML representation of the HTTP request (the <em>Request XML</em>) to an XML representation of the HTTP response (the <em>Response XML</em>). Which specific XSLT stylesheet or XQuery (or pipeline of XSLT stylesheets and XQueries) must be executed for a particular HTTP request is governed by another XSLT stylesheet, the <em>request dispatcher stylesheet</em>.</p>
</div>
<div class="paragraph">
<p>After every XSLT transformation step, an optional <a href="#validation-pipeline-steps">validation pipeline step</a> (XML Schema or Schematron) can be added to validate the result of the previous transformation step.</p>
</div>
<div class="paragraph">
<p>During transformations, data sources can be accessed using a <a href="#xpath-extension-function-library">library of built-in extension functions</a> that provide HTTP communication (for example to consume REST or SOAP based web services), file and directory access, relational database access and so on.</p>
</div>
<div class="paragraph">
<p>The result of a transformation pipeline can be serialized to XML, (X)HTML or plain text format and using specific <a href="#serialization-pipeline-steps">serializer pipeline steps</a> to JSON, ZIP files, PDF, Postscript or RTF (using XSL:FO and Apache FOP).</p>
</div>
<div class="paragraph">
<p>The configuration of an XSLWeb web application can be specified in an XML configuration document called <em>webapp.xml</em>. An XSLWeb server can contain multiple separate web applications.</p>
</div>
<div class="paragraph">
<p>Diagram 1 shows the flow of a HTTP request to a HTTP response within XSLWeb:</p>
</div>
<div class="paragraph">
<div class="title">XSLWeb request and response flow</div>
<p><span class="image"><img src="images/xslweb_flow.png" alt="XSLWeb flow" width="100%"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A HTTP request is sent from a client (a web browser or webservice client).</p>
</li>
<li>
<p>The HTTP request is serialized by the Request Serializer to a Request XML document. All information of the request is preserved in the XML.</p>
</li>
<li>
<p>The Request XML is the input of the Request Dispatcher, which transform the Request XML using the webapp specific XSLT stylesheet <em>request-dispatcher.xsl</em>. The output of this transformation is a pipeline specification, in the simplest form only specifying the path to a XSLT stylesheet that will be used to transforming the Request XML to the Response XML. This specification could also contain a pipeline of multiple XSLT transformations and XML Schema or Schematron validations.</p>
</li>
<li>
<p>The pipeline specification is the input for the Pipeline Processor, which reads the Pipeline XML and executes the pipeline transformation and validation steps. The input for the first transformation in the pipeline is the same Request XML as was used as input for the Request Dispatcher.</p>
</li>
<li>
<p>The Pipeline Processor executes your pipeline of XSLT stylesheets, XQueries and validations. The last transformation in the pipeline must generate a Response XML document which conforms to the schema <em>«xslweb-home»/config/xsd/xslweb/response.xsd</em>.</p>
</li>
<li>
<p>The Response XML is then passed on to the Response Deserializer, which interprets your Response XML and converts it to a HTTP response, which is sent back to the client, a web browser of webservice client (7).</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="request-xml"><a class="anchor" href="#request-xml"></a><a class="link" href="#request-xml">1.2. The Request XML</a></h3>
<div class="paragraph">
<p>The Request XML is an XML representation (or <em>XML serialization</em>) of the HTTP Request. The Request XML conforms to the XML Schema <em>«xslweb-home»/config/xsd/xslweb/request.xsd</em>, and contains the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The request properties: auth-type, character-encoding, content-length, context-path, content-type, local-addr, local-name, local-port, method, path, path-info, path-translated, protocol, query-string, remote-addr, remote-host, remote-port, remote-user, requested-session-id, request-URI, request-url, scheme, server-name, server-port, servlet-path, webapp-path, is-secure, is-requested-session-id-from-cookie, is-requested-session-id-from-url and is-requested-session-id-valid.</p>
</li>
<li>
<p>HTTP headers</p>
</li>
<li>
<p>Request parameters</p>
</li>
<li>
<p>Request body</p>
</li>
<li>
<p>File uploads</p>
</li>
<li>
<p>Session information</p>
</li>
<li>
<p>Cookies</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#appendix-request-xml-example">Appendix A: Request XML example</a></p>
</div>
</div>
<div class="sect2">
<h3 id="response-xml"><a class="anchor" href="#response-xml"></a><a class="link" href="#response-xml">1.3. The Response XML</a></h3>
<div class="paragraph">
<p>The Response XML is a XML representation (or <em>XML serialization</em>) of the HTTP Response. The Response XML must conform to the XML Schema <em>«xslweb-home»/config/xsd/xslweb/response.xsd</em>, and contains the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP headers</p>
</li>
<li>
<p>Response body</p>
</li>
<li>
<p>Session information</p>
</li>
<li>
<p>Cookies</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#appendix-response-xml-example">Appendix B: Response XML example</a></p>
</div>
</div>
<div class="sect2">
<h3 id="request-dispatcher"><a class="anchor" href="#request-dispatcher"></a><a class="link" href="#request-dispatcher">1.4. The Request dispatcher XSLT stylesheet</a></h3>
<div class="paragraph">
<p>The task of the XSLT stylesheet <em>request-dispatcher.xsl</em> is to dynamically generate the pipeline specification that is then used to process the Request XML and convert it to the Response XML. The input of the request dispatcher transformation is the Request XML so it has all information available to generate the correct pipeline. The output of the request dispatcher transformation is a pipeline specification that must conform to the XML Schema <em>«xslweb-home»/config/xsd/xslweb/pipeline.xsd</em>.</p>
</div>
<div class="paragraph">
<p>Below is an example of a very basic request dispatcher stylesheet that generates a valid pipeline for the HTTP request <em><a href="http://my-domain/my-webapp/hello-world.html" class="bare">http://my-domain/my-webapp/hello-world.html</a></em>:</p>
</div>
<div class="listingblock">
<div class="title">Basic request dispatcher stylesheet</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:req="http://www.armatiek.com/xslweb/request"
  xmlns:pipeline="http://www.armatiek.com/xslweb/pipeline"
  version="3.0"&gt;

  &lt;xsl:template match="/req:request[req:path = '/hello-world.html']"&gt;
    &lt;pipeline:pipeline&gt;
      &lt;pipeline:transformer
        name="hello-world"
        xsl-path="hello-world.xsl"
        log="true"/&gt;
    &lt;/pipeline:pipeline&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example uses the request parameter <em>lang</em> in the request <em><a href="http://my-domain/my-webapp/hello-world.html?lang=en" class="bare">http://my-domain/my-webapp/hello-world.html?lang=en</a></em> to determine the stylesheet. This <em>lang</em> parameter is also passed to the stylesheet as a stylesheet parameter:</p>
</div>
<div class="listingblock">
<div class="title">Extended request dispatcher stylesheet</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:req="http://www.armatiek.com/xslweb/request"
  xmlns:pipeline="http://www.armatiek.com/xslweb/pipeline"
  version="3.0"&gt;

  &lt;xsl:template match="/req:request[req:path = '/hello-world.html']"&gt;
    &lt;xsl:variable
      name="lang"
      select="req:parameters/req:parameter[@name='lang']/req:value[1]"/&gt;
    &lt;pipeline:pipeline&gt;
      &lt;pipeline:transformer
        name="hello-world"
        xsl-path="{concat('hello-world-', $lang, '.xsl')}"&gt;
        &lt;pipeline:parameter
          name="lang"
          uri="http://www.armatiek.com/xslweb/my-namespace"
          type="xs:string"&gt;
          &lt;pipeline:value&gt;
            &lt;xsl:value-of select="$lang"/&gt;
          &lt;/pipeline:value&gt;
        &lt;/pipeline:parameter&gt;
      &lt;/pipeline:transformer&gt;
    &lt;/pipeline:pipeline&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A pipeline consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One or more of the following <em>transformation</em> pipeline steps:</p>
<div class="ulist">
<ul>
<li>
<p><em>transformer</em>: transforms the input of the pipeline step using an XSLT version 1.0, 2.0 or 3.0 stylesheet.</p>
</li>
<li>
<p><em>query</em>: processes the input of the pipeline step using an XQuery version 1.0, 3.0 or 3.1 query.</p>
</li>
<li>
<p><em>transformer-stx</em>: transform the input of the pipeline step using a STX (Streaming Transformations for XML) version 1.0 stylesheet.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Zero or more of the following <em>validation</em> pipeline steps:</p>
<div class="ulist">
<ul>
<li>
<p><em>schema-validator</em>: validates the input of the step using an XML Schema version 1.0.</p>
</li>
<li>
<p><em>schematron-validator</em>: validates the input of the step using an ISO Schematron schema.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Zero or one of the following <em>serialization</em> pipeline step</p>
<div class="ulist">
<ul>
<li>
<p><em>json-serializer</em>: serializes XML output to a JSON representation.</p>
</li>
<li>
<p><em>zip-serializer</em>: serializes a XML ZIP specification to an actual ZIP file.</p>
</li>
<li>
<p><em>resource-serializer</em>: serializes a text or binary file to the response.</p>
</li>
<li>
<p><em>fop-serializer</em>: serializes XSL-FO generated in a previous pipeline step to PDF using the Apache FOP XSL-FO processor.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#pipeline-steps">Pipeline steps</a> for a more in depth overview of these different pipeline steps.</p>
</div>
<div class="paragraph">
<p>The output of the pipeline can be cached by specifying extra attributes on the <em>&lt;pipeline:pipeline/&gt;</em> element, see <a href="#response-caching">Response caching</a>.</p>
</div>
<div class="paragraph">
<p>In development-mode, the output of the (intermediate) transformation steps can be logged to a log file, see chapters <a href="#development-mode">Development mode and production mode</a> and <a href="#logging">Logging</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="pipeline"><a class="anchor" href="#pipeline"></a><a class="link" href="#pipeline">1.5. The pipeline transformation stylesheets</a></h3>
<div class="paragraph">
<p>The result of the request dispatcher stylesheet is a pipeline specification containing one or more transformation, query, validation or serialization steps. The input of the first stylesheet or query in the pipeline is the Request XML, the output of the last stylesheet in the pipeline must conform to the Response XML schema.</p>
</div>
<div class="paragraph">
<p>XSLWeb extends the standard XSLT/XPath 1.0, 2.0 and 3.0 functionality in a number of ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XSLWeb provides a number of built-in XPath extension functions that you can use to read and write files and directories, execute HTTP requests, access the Request, Response and Context, Session and WebApp objects, log messages, send e-mails and so on, see <a href="#xpath-extension-function-library">XPath extension function library</a>.</p>
</li>
<li>
<p>Other pipelines can be called from within a stylesheet and the result of this nested pipeline can be used or embedded in the calling stylesheet by passing a URI that starts with the scheme “xslweb://” to the standard XSLT <em>document()</em> function, see <a href="#nested-pipelines">Nested pipelines</a>.</p>
</li>
<li>
<p>URLs that are passed to XSLT’s <em>document()</em> or XQuery’s <em>doc()</em> function and must be proxied through a proxy server can be provided with two extra request parameters: <em>proxyHost</em> and <em>proxyPort</em>.</p>
</li>
<li>
<p>Within every transformation a number of standard stylesheet parameters is available, see <a href="#stylesheet-parameters">Stylesheet parameters</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="web-applications"><a class="anchor" href="#web-applications"></a><a class="link" href="#web-applications">1.6. Web applications</a></h3>
<div class="paragraph">
<p>An XSLWeb installation can contain multiple separate web applications. A web application can be added under the folder <em>«xslweb-home»/webapps</em> and has the following minimal folder structure (bold):</p>
</div>
<div class="ulist no-bullets">
<ul>
<li>
<p><strong>my-webapp/</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>lib/</strong></p>
</li>
<li>
<p><strong>static/</strong></p>
</li>
<li>
<p><strong>xsl/</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>request-dispatcher.xsl</strong></p>
</li>
<li>
<p>my-stylesheet.xsl</p>
</li>
</ul>
</div>
</li>
<li>
<p>xquery/</p>
<div class="ulist">
<ul>
<li>
<p>my-query.xq</p>
</li>
</ul>
</div>
</li>
<li>
<p>stx/</p>
<div class="ulist">
<ul>
<li>
<p>my-stylesheet.stx</p>
</li>
</ul>
</div>
</li>
<li>
<p>xsd/</p>
<div class="ulist">
<ul>
<li>
<p>my-xml-schema.xsd</p>
</li>
</ul>
</div>
</li>
<li>
<p>sch/</p>
<div class="ulist">
<ul>
<li>
<p>my-schematron.sch</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>webapp.xml</strong></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This web application can be accessed by using the following uri:</p>
</div>
<div class="paragraph">
<p><a href="http://&lt;domain&gt;:&lt;port&gt;/&lt;xslweb-context-path&gt;/my-webapp" class="bare">http://&lt;domain&gt;:&lt;port&gt;/&lt;xslweb-context-path&gt;/my-webapp</a></p>
</div>
<div class="paragraph">
<p>If you use the jar distribution of XSLWeb with default parameters, this uri will be:</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:8080/my-webapp" class="bare">http://localhost:8080/my-webapp</a></p>
</div>
<div class="paragraph">
<p>Out of the box, XSLWeb contains four web applications, “documentation”, “examples”, “my-webapp” and “ROOT”. The ROOT web application is used for Uri’s that doesn’t contain a reference to a web application, for instance:</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:8080" class="bare">http://localhost:8080</a></p>
</div>
<div class="paragraph">
<p>The folder <em>my-webapp</em> can have any name you like (provided it doesn’t contain spaces or other strange characters). The folder <em>lib</em> can contain any custom XPath extension functions you have developed in Java and 3<sup>rd</sup> party libraries they depend on, see <a href="#custom-extension-functions">Custom extension functions</a>. The folder <em>static</em> contains all static files you use in your web application, like images, css stylesheets and javascript files. The folder <em>xsl</em> contains the XSLT stylesheet <em>request-dispatcher.xsl</em> and at least one pipeline XSLT stylesheet that transforms Request XML to Response XML. The folders <em>xsd</em> and <em>sch</em> can contain XML Schema or Schematron validation specifications. The file <em>webapp.xml</em> contains further configuration of your web application.</p>
</div>
<div class="paragraph">
<p>The file <em>webapp.xml</em> contains the configuration of your web application. It must conform to the XML Schema <em>«xslweb-home»/config/xsd/xslweb/xslweb-webapp.xsd</em>, and contains the following configuration items:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Title</em>: The title of your web application</p>
</li>
<li>
<p><em>Description</em>: The description of your web application</p>
</li>
<li>
<p><em>Development-mode</em>: see <a href="#development-mode">Development mode and production mode</a>.</p>
</li>
<li>
<p><em>Resources</em>: The definition of requests to static files that should not be processed by the request dispatcher (but should be served straight away) and the duration these resources should be cached by the browser (default 4 hours).</p>
</li>
<li>
<p><em>Parameters</em>: The definition of webapp specific configuration parameters that are passed as stylesheet parameters to every XSLT transformation, see <a href="#stylesheet-parameters">Stylesheet parameters</a>.</p>
</li>
<li>
<p><em>Jobs</em>: The definition of scheduled jobs, see <a href="#job-scheduling">Job scheduling</a>.</p>
</li>
<li>
<p><em>Data sources</em>: the definition of JDBC data sources.</p>
</li>
<li>
<p><em>FOP configurations</em>: configurations for the Apache FOP serialization step, see <a href="#fop-serializer-step">fop-serializer step</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#appendix-webapp-xml-example">Appendix C: Webapp XML example</a> for an example of a webapp.xml configuration.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pipeline-steps"><a class="anchor" href="#pipeline-steps"></a><a class="link" href="#pipeline-steps">2. Pipeline steps</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="transformation-pipeline-steps"><a class="anchor" href="#transformation-pipeline-steps"></a><a class="link" href="#transformation-pipeline-steps">2.1. Transformation pipeline steps</a></h3>
<div class="paragraph">
<p>The following transformation pipeline steps are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>transformer</p>
</li>
<li>
<p>query</p>
</li>
<li>
<p>transformer-stx</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="transformer-step"><a class="anchor" href="#transformer-step"></a><a class="link" href="#transformer-step">2.1.1. transformer step</a></h4>
<div class="paragraph">
<p>The transformer step transforms the input of the pipeline step using an XSLT version 1.0, 2.0 or 3.0 stylesheet.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="title">Transformer pipeline step</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer name="my-xsl-step" xsl-path="my-stylesheet.xsl"/&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="query-step"><a class="anchor" href="#query-step"></a><a class="link" href="#query-step">2.1.2. query step</a></h4>
<div class="paragraph">
<p>The query step processes the input of the pipeline step using an XQuery version 1.0, 3.0 or 3.1 query.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="title">Query pipeline step</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer name="my-xquery-step" xquery-path="my-query.xq"/&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>See also example 27 of the <em>examples</em> webapp</p>
</div>
</div>
<div class="sect3">
<h4 id="transformer-stx-step"><a class="anchor" href="#transformer-stx-step"></a><a class="link" href="#transformer-stx-step">2.1.3. transformer-stx step</a></h4>
<div class="paragraph">
<p>The transformer-stx step transforms the input of the pipeline step using a STX (Streaming Transformations for XML) version 1.0 stylesheet.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="title">STX pipeline step</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer-stx name="my-stx-step" stx-path="my-stylesheet.stx"/&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>See also example 28 of the <em>examples</em> webapp</p>
</div>
<div class="paragraph">
<p>These steps could be combined in a pipeline as follows:</p>
</div>
<div class="listingblock">
<div class="title">Multiple pipeline steps</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer-stx name="my-stx-step" stx-path="my-stylesheet.stx"/&gt;
  &lt;pipeline:transformer name="my-xsl-step" xsl-path="my-stylesheet.xsl"/&gt;
  &lt;pipeline:query name="my-xquery-step" xquery-path="my-query.xq"/&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="extensions"><a class="anchor" href="#extensions"></a><a class="link" href="#extensions">2.1.4. Extensions</a></h4>
<div class="paragraph">
<p>XSLWeb extends the standard functionality of the transformation steps in a number of ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XSLWeb provides a number of built-in XPath extension functions to the <em>transformer</em> and <em>query</em> steps (not the <em>transformer-stx</em> step) that you can use to read and write files and directories, execute HTTP requests, access the Request, Response and Context, Session and WebApp objects, log messages, send e-mails and so on, see <a href="#xpath-extension-function-library">XPath extension function library</a>.</p>
</li>
<li>
<p>Other pipelines can be called from within a stylesheet or query and the result of this nested pipeline can be used or embedded in the calling stylesheet/query by passing a URI that starts with the scheme “xslweb://” to the standard XSLT/XQuery <em>document()</em> function or the STX <em>stx:process-children</em> element, see <a href="#nested-pipelines">Nested pipelines</a>.</p>
</li>
<li>
<p>Within every transformation of query a number of standard stylesheet parameters is available, see <a href="#stylesheet-parameters">Stylesheet parameters</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validation-pipeline-steps"><a class="anchor" href="#validation-pipeline-steps"></a><a class="link" href="#validation-pipeline-steps">2.2. Validation pipeline steps</a></h3>
<div class="paragraph">
<p>XSLWeb supports the XML validation of the output of a transformation pipeline step by adding a validation pipeline step after the transformation step.</p>
</div>
<div class="paragraph">
<p>The following validation pipeline steps are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>schema-validator</p>
</li>
<li>
<p>schematron-validator</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="schema-validator-step"><a class="anchor" href="#schema-validator-step"></a><a class="link" href="#schema-validator-step">2.2.1. schema-validator step</a></h4>
<div class="paragraph">
<p>The schema-validator step validates the output of the previous step using an XML Schema version 1.0.</p>
</div>
<div class="listingblock">
<div class="title">Schema validator pipeline step</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer name="my-transformation " xsl-path="my-transormation.xsl"/&gt;
  &lt;pipeline:schema-validator
    name="schema-validator"
    xsl-param-namespace="http://www.armatiek.com/xslweb/validation"
    xsl-param-name="schema-validation-report"&gt;
    &lt;pipeline:schema-paths&gt;
      &lt;pipeline:schema-path&gt;my-schema.xsd&lt;/pipeline:schema-path&gt;
    &lt;/pipeline:schema-paths&gt;
  &lt;/pipeline:schema-validator&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The location(s) of the XML schemas can be specified in the subelements <em>schema-path</em>. These paths must be relative to the directory <em>«webapp»/xsd.</em></p>
</div>
<div class="paragraph">
<p>Any validation warnings and errors are written to the log file. If you specify the attribute <em>xsl-param-name</em> (and optional attribute <em>xsl-param-namespace</em>), a validation report (in XML format) is added as a stylesheet parameter of type document-node() to the next XSLT transformation step in the pipeline.</p>
</div>
<div class="paragraph">
<p>Validation properties (like <a href="http://javax.xml.XMLConstants/property/accessExternalSchema" class="bare">http://javax.xml.XMLConstants/property/accessExternalSchema</a>) and features (like <a href="http://javax.xml.XMLConstants/feature/secure-processing" class="bare">http://javax.xml.XMLConstants/feature/secure-processing</a>) can be specified in the <em>features</em> and <em>properties</em> subelements (see pipeline.xsd).</p>
</div>
<div class="paragraph">
<p>See also example 25 of the <em>examples</em> webapp.</p>
</div>
</div>
<div class="sect3">
<h4 id="schematron-validator-step"><a class="anchor" href="#schematron-validator-step"></a><a class="link" href="#schematron-validator-step">2.2.2. schematron-validator step</a></h4>
<div class="paragraph">
<p>The Schematron-validator step validates the output of the previous step using an ISO Schematron schema:</p>
</div>
<div class="listingblock">
<div class="title">Schematron validator pipeline step</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer name="my-transformation " xsl-path="my-transormation.xsl"/&gt;
  &lt;pipeline:schematron-validator
    name="schematron-validator"
    schematron-path="my-schematron.sch "
    xsl-param-namespace="http://www.armatiek.com/xslweb/validation"
    xsl-param-name="schematron-validation-report"&gt;
  &lt;/pipeline:schematron-validator&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The location of the Schematron schema can be specified in the attribute <em>schematron-path</em>. This path must be relative to the directory <em>«xslweb-home»/sch.</em></p>
</div>
<div class="paragraph">
<p>Any validation warnings and errors are written to the log file. If you specify the attribute <em>xsl-param-name</em> (and optional attribute <em>xsl-param-namespace</em>), the validation report (in <a href="http://www.schematron.com/validators.html">SVRL format</a>) is added as a stylesheet parameter of type document-node() to the next XSLT transformation step in the pipeline.</p>
</div>
<div class="paragraph">
<p>The Schematron phase can be specified using the optional attribute <em>phase</em> on the element <em>schematron-validator</em> (see pipeline.xsd).</p>
</div>
<div class="paragraph">
<p>See also example 25 of the <em>examples</em> webapp.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="serialization-pipeline-steps"><a class="anchor" href="#serialization-pipeline-steps"></a><a class="link" href="#serialization-pipeline-steps">2.3. Serialization pipeline steps</a></h3>
<div class="paragraph">
<p>The way the result of the transformation pipeline steps is serialized to XML, XHTML, HTML or text can be specified by the serialization attributes of the element <em>xsl:output</em> in the last stylesheet or query of the pipeline, using the attributes <em>method</em>, <em>encoding</em>, <em>indent</em>, <em>omit-xml-declaration</em> and so on.</p>
</div>
<div class="paragraph">
<p>In case the output of the pipeline should not be XML, XHTML, HTML or text, a specific serialization pipeline step can be added at the end of the pipeline. XSLWeb provides the serialization steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>json-serializer</p>
</li>
<li>
<p>zip-serializer</p>
</li>
<li>
<p>resource-serializer</p>
</li>
<li>
<p>fop-serializer</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="json-serializer-step"><a class="anchor" href="#json-serializer-step"></a><a class="link" href="#json-serializer-step">2.3.1. json-serializer step</a></h4>
<div class="paragraph">
<p>The json-serializer step serializes XML to a <a href="http://www.json.org/">JSON</a> representation. This step can be added as the last step in a pipeline like this:</p>
</div>
<div class="listingblock">
<div class="title">JSON serializer pipeline step</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer
    name="my-transformation "
    xsl-path="my-transformation.xsl"/&gt;
  &lt;pipeline:json-serializer
    name="json-serialization"
    auto-array="false"
    pretty-print="true"&gt;
  &lt;pipeline:json-serializer/&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The pipeline step supports the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>auto-array</p>
</li>
<li>
<p>auto-primitive</p>
</li>
<li>
<p>multi-pi</p>
</li>
<li>
<p>namespace-declarations</p>
</li>
<li>
<p>namespace-separator</p>
</li>
<li>
<p>pretty-print</p>
</li>
<li>
<p>virtual-root-namespace</p>
</li>
<li>
<p>virtual-root-name</p>
</li>
<li>
<p>repairing-namespaces</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See for an explanation of these properties the documentation of <a href="https://github.com/beckchr/staxon/wiki/Getting-Started">StAXON</a>.</p>
</div>
<div class="paragraph">
<p>Namespace declarations can be specified by adding namespace-declaration elements under the namespace-declarations sub element of json-serializer (see pipeline.xsd).</p>
</div>
<div class="paragraph">
<p>See also example 18 of the <em>examples</em> webapp.</p>
</div>
</div>
<div class="sect3">
<h4 id="zip-serializer-step"><a class="anchor" href="#zip-serializer-step"></a><a class="link" href="#zip-serializer-step">2.3.2. zip-serializer step</a></h4>
<div class="paragraph">
<p>The zip-serializer step serializes an XML representation of the contents of a ZIP file to the actual file.</p>
</div>
<div class="paragraph">
<p>A ZIP serializer pipeline step can be added as the last step in a pipeline like this:</p>
</div>
<div class="listingblock">
<div class="title">ZIP serializer pipeline step</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer
    name="my-zip-serialization"
    xsl-path="my-zip-serialization.xsl"/&gt;
  &lt;pipeline:zip-serializer name="zip"/&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The last transformation step in the pipeline has to generate a response like the following XML:</p>
</div>
<div class="listingblock">
<div class="title">Specify ZIP contents</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;resp:response status="200"&gt;
  &lt;resp:body&gt;
    &lt;zip:zip-serializer
      xmlns:zip="http://www.armatiek.com/xslweb/zip-serializer"&gt;
      &lt;zip:file-entry
        name="file/myfile.txt"
        src="/home/john/myfile.txt"/&gt;
      &lt;zip:inline-entry
        name="dir1/test.xml"
        method="xml"
        encoding="UTF-8"
        omit-xml-declaration="no"
        indent="yes"&gt;
        &lt;a&gt;
          &lt;b&gt;Hello World&lt;/b&gt;
        &lt;/a&gt;
      &lt;/zip:inline-entry&gt;
    &lt;/zip:zip-serializer&gt;
  &lt;/resp:body&gt;
&lt;/resp:response&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The element zip-serializer can contain two elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>zip:file-entry</strong>: a representation of a disk file that must be serialized to the zip file. The attribute “src” holds the path to the file, the attribute “name” holds the name (path) of the file in the serialized zip file.</p>
</li>
<li>
<p><strong>zip:inline-entry</strong>: an inline XML, HTML or text fragment that must be serialized to the ZIP file. The attribute “name” holds the name (path) of the file in the serialized zip file. Other attributes specify the serialization behavior and are the same as the attributes of xsl:output.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also example 23 of the <em>examples</em> webapp.</p>
</div>
</div>
<div class="sect3">
<h4 id="resource-serializer-step"><a class="anchor" href="#resource-serializer-step"></a><a class="link" href="#resource-serializer-step">2.3.3. resource-serializer step</a></h4>
<div class="paragraph">
<p>The resource serializer returns a stored text or binary file to the client. It is typically used in scenarios where a file is dynamically generated during pipeline execution (for instance by using the extension function <em>exec-external()</em>) and then must be returned to the client in the same request. Another scenario is to create download links to static files that are located on the server outside the scope of the webapp’s “static” directory.</p>
</div>
<div class="paragraph">
<p>The resource serializer pipeline step can be added as the last step in a pipeline like this:</p>
</div>
<div class="listingblock">
<div class="title">Resource serializer pipeline step</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer
    name="resource-serialization"
    xsl-path="resource-serialization.xsl"/&gt;
  &lt;pipeline:resource-serializer name="resource"/&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the stylesheet <em>resource-serialization.xsl</em> must generate a XML fragment containing information that the resource serializer uses to create the desired response. The stylesheet must generate an element <em>resource-serializer</em> in the namespace <em>http://www.armatiek.com/xslweb/resource-serializer</em>. On this element the following attributes can be set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>path</strong>: the local path to the file that must be returned to the client.</p>
</li>
<li>
<p><strong>content-type</strong> (optional): the content type (mime type) that must be set on the response. If this attribute is not set, XSLWeb will try to determine the content type automatically.</p>
</li>
<li>
<p><strong>content-disposition-filename</strong> (optional): this attribute can be used to force the browser to display a “Save as” dialog (instead of display the file “inline”). The specified filename will be used as the default filename in de dialog.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An example of the output of the XSLT stylesheet <em>resource-serialization.xsl</em> is:</p>
</div>
<div class="listingblock">
<div class="title">Resource</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;res:resource-serializer
  path="webapps/examples/xsl/resource/leaves.jpg"
  content-type="image/jpg"
  content-disposition-filename="my-image.jpg"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>See also example 26 of the <em>examples</em> webapp</p>
</div>
</div>
<div class="sect3">
<h4 id="fop-serializer-step"><a class="anchor" href="#fop-serializer-step"></a><a class="link" href="#fop-serializer-step">2.3.4. fop-serializer step</a></h4>
<div class="paragraph">
<p>The fop-serializer step serializes <a href="https://www.w3.org/TR/xsl/">XSL:FO format</a> generated in a previous pipeline step to document formats like PDF or RTF using the <a href="https://xmlgraphics.apache.org/fop/">Apache FOP processor</a> version 2.2.</p>
</div>
<div class="paragraph">
<p>The FOP serializer pipeline step can be added as the last step in a pipeline like this:</p>
</div>
<div class="listingblock">
<div class="title">FOP serializer pipeline step</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;pipeline:pipeline&gt;
  &lt;pipeline:transformer
    name="my-xsl-fo-serialization"
    xsl-path="my-xsl-fo-serialization.xsl"/&gt;
  &lt;pipeline:fop-serializer name="fop-serialization"/&gt;
&lt;/pipeline:pipeline&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The last transformation step in the pipeline has to generate a response like the following XML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;resp:response status="200"&gt;
  &lt;resp:body&gt;
    &lt;fop:fop-serializer
      xmlns:fop="http://www.armatiek.com/xslweb/fop-serializer"
      output-format="application/pdf"
      config-name="default"&gt;
      &lt;fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format"&gt;
        &lt;!-- Your further XSL:FO code --&gt;
      &lt;/fo:root&gt;
    &lt;/fop:fop-serializer&gt;
  &lt;/resp:body&gt;
&lt;/resp:response&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The fop:fop-serializer element supports the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>config-name</strong>: the name of a FOP configuration in webapp.xml.</p>
</li>
<li>
<p><strong>output-format</strong> (optional): the output format of the serialization, like “application/pdf” (default), application/postscript, application/rtf (see the FOP class MimeConstants.java).</p>
</li>
<li>
<p><strong>pdf-a-mode</strong> (optional): specify a <a href="https://xmlgraphics.apache.org/fop/2.1/pdfa.html">PDF/A profile</a>:</p>
<div class="ulist">
<ul>
<li>
<p>PDF/A-1a</p>
</li>
<li>
<p>PDF/A-1b</p>
</li>
<li>
<p>PDF/A-2a</p>
</li>
<li>
<p>PDF/A-2b</p>
</li>
<li>
<p>PDF/A-2u</p>
</li>
<li>
<p>PDF/A-3a</p>
</li>
<li>
<p>PDF/A-3b</p>
</li>
<li>
<p>PDF/A-3u</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also example 24 of the <em>examples</em> webapp.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="stylesheet-parameters"><a class="anchor" href="#stylesheet-parameters"></a><a class="link" href="#stylesheet-parameters">3. Stylesheet parameters</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every XSLT stylesheet that is executed within XSLWeb is provided with a number of stylesheet parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The configuration parameters from the parameters section in the <em>webapp.xml</em>. The parameter’s local name can be given a namespace using the attribute <em>uri</em> and the type of the values can be specified using the attribute <em>type</em>. The value itself can be a sequence of atomic values.</p>
</li>
<li>
<p><em>config:home-dir</em>: the path to the XSLWeb home directory (config = <em>http://www.armatiek.com/xslweb/configuration</em>)</p>
</li>
<li>
<p><em>config:webapp-dir</em>: the path to the base directory of the webapp.</p>
</li>
<li>
<p><em>config:webapp-path</em>: The path in de url to the web application (“/” for the webapp <em>ROOT</em> and <em>“/” + webapp-name</em> for other webapps).</p>
</li>
<li>
<p><em>config:development-mode</em>: whether the webapp runs in development-mode or production-mode.</p>
</li>
<li>
<p>The Java HttpServletRequest, HttpServletResponse and WebApp objects. These are used in custom XPath extension functions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pipeline stylesheets are also provided with any parameters that are defined within the element <em>pipeline:transformer</em> in <em>request-dispatcher.xsl</em>. The parameter’s local name can be given a namespace using the attribute <em>uri</em> and the type of the values can be specified using the attribute <em>type</em>. The value itself can be a sequence of atomic values.</p>
</div>
<div class="paragraph">
<p>The parameters only have to be declared in the stylesheets (as <em>&lt;xsl:param/&gt;</em> elements) when they are actually used. The parameters for the Java objects doesn’t have to be declared at all.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nested-pipelines"><a class="anchor" href="#nested-pipelines"></a><a class="link" href="#nested-pipelines">4. Nested pipelines</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is possible to call another pipeline from a stylesheet using the standard XSLT function <em>document()</em> providing an URL that starts with the scheme <em>xslweb</em>, for instance:</p>
</div>
<div class="listingblock">
<div class="title">Nested pipeline</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;xsl:sequence select="document('xslweb:///examples/nestedpipeline.html')"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <em>examples</em> is the name of the webapp of the nested pipeline. The result of the nested pipeline will be available in the calling stylesheet as a document node. The nested pipeline request will follow the flow of a normal HTTP request, including the request dispatcher stylesheet. A nested pipeline call can be seen as an “internal request”, it does not go through the HTTP stack. [<mark>_Response_serialization_1 .anchor]</mark>#</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="development-mode"><a class="anchor" href="#development-mode"></a><a class="link" href="#development-mode">5. Development mode and production mode</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In webapp.xml a web application can be configured to run in <em>development mode</em> or <em>production mode</em>. The differences between development and production mode are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In development mode, compiled XSLT stylesheets are not cached. That means that for every request all stylesheets in the pipeline are reread from disk and recompiled and therefore changes will be visible immediately. In production mode, stylesheets are compiled and cached the first time they are used. However, in production mode, changes in stylesheets will automatically be detected by the file alteration monitor and the complete web application will be reloaded. So there is no need to restart the application server when deploying stylesheets in production mode. The file alteration monitor will also detect and pick up changes in the webapp.xml configuration file and plugin extension function library jars.</p>
</li>
<li>
<p>In development mode, the caching framework (using the cache attributes on the pipeline element) is disabled, so no caching is performed.</p>
</li>
<li>
<p>In development mode, the output of a pipeline is not streamed directly to the client (e.g. the browser) but instead buffered until the complete pipeline is executed. If an error occurs during the execution of the pipeline, the error message and stack trace are sent to the client, making it easier to debug the error. If an error occurs in production mode, only a HTTP status code 500 (internal server error) is sent to the client (that is, if the response is not already committed by the application server).</p>
</li>
<li>
<p>In development mode a pipeline step can be configured to log its (intermediate) output to the log file <em>«xslweb-home»/logs/pipeline.log</em>, by specifying <em>log=”true”</em> on the pipeline step. In production mode all logging of the output of pipeline steps is disabled.</p>
</li>
<li>
<p>In development mode, the generated XSLT of a Schematron schema is logged to the log file (with severity INFO).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logging"><a class="anchor" href="#logging"></a><a class="link" href="#logging">6. Logging</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Log files are stored in the directory <em>«xslweb-home»/logs</em>. This directory contains two log files, <em>xslweb.log</em> and <em>pipeline.log</em>.</p>
</div>
<div class="paragraph">
<p>Regular XSLWeb specific log messages are logged to <em>xslweb.log</em>. It’s also possible to write to this log file from web application stylesheets using the XPath extension function <em>log:log()</em>, see <a href="#logging-functions">Logging functions</a>.</p>
</div>
<div class="paragraph">
<p>In development mode a pipeline step can be configured to log its (intermediate) output to the log file <em>pipeline.log</em>, by specifying <em>log=”true”</em> on the pipeline step.</p>
</div>
<div class="paragraph">
<p>By default the log files are rotated when they reach the size of 10Mb, and a maximum of 8 backups is retained.</p>
</div>
<div class="paragraph">
<p>XSLWeb makes use of the standard logging framework <a href="http://www.slf4j.org/">slf4j</a> with <a href="http://logback.qos.ch/">logback</a>. The rotation, backup and other settings can be configured in the configuration file <em>«xslweb-home»/config/logback.xml</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="response-caching"><a class="anchor" href="#response-caching"></a><a class="link" href="#response-caching">7. Response caching</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The output of a pipeline can be cached by providing optional caching attributes on the element <em>pipeline:pipeline</em> in the stylesheet <em>request-dispatcher.xsl</em>. The purpose of caching the response output is to gain performance; a response that can be served from cache will be returned quicker because no transformations are necessary and also the load on the server is decreased.</p>
</div>
<div class="paragraph">
<p>The following attributes are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>cache</em> (xs:boolean): specifies whether the output of the response must be cache. Default: false.</p>
</li>
<li>
<p><em>cache-key</em> (xs:string): specifies the key under which the output of the pipeline must be cached, default the concatenation of req:method, req:request-URI and req:query-string. It is only necessary to override the default mechanism if for instance the query string contains parameters that are different for every request, like with tracking software.</p>
</li>
<li>
<p><em>cache-time-to-live</em> (xs:integer): The number of seconds the output will be cached from the time it was first added to the cache. Default: 60 seconds.</p>
</li>
<li>
<p><em>cache-time-to-idle</em>: (xs:integer): The number of seconds the output will be cached from the last time it was actually used. Default”: 60 seconds.</p>
</li>
<li>
<p><em>cache-scope</em> (xs:string): One of “webapp” or “user”. It specifies whether the output should be cached and reused by all users of the web application (“webapp”), or for a specific user (“user”). Default “webapp”.</p>
</li>
<li>
<p><em>cache-headers</em> (xs:boolean): Specifies whether XSLWeb should automatically provide the HTTP response cache headers: <em>ETag</em>, <em>Last-Modified</em> and <em>Expires</em>. It supports conditional GET. Because browsers and other HTTP clients have the expiry information returned in the response headers, they do not even need to request the page again. Even once the local browser copy has expired, the browser will do a conditional GET. Default: false.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>XSLWeb uses the standard caching framework Ehcache to support its caching (see <a href="http://ehcache.org" class="bare">http://ehcache.org</a>). More advanced configuration properties can be specified in the Ehcache specific configuration file <em>«xslweb-home»/config/xslweb-ehcache.xml</em>, like for instance how many responses should be cached in memory and how many on disk. See the <a href="http://www.ehcache.org/generated/2.9.0/html/ehc-all/index.html#page/Ehcache_Documentation_Set/co-cfgbasics_xml_configuration.html">ehcache documentation</a> for further details.</p>
</div>
<div class="paragraph">
<p>N.B. Response caching is only enabled in production mode, see <a href="#development-mode">Development mode and production mode</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="job-scheduling"><a class="anchor" href="#job-scheduling"></a><a class="link" href="#job-scheduling">8. Job scheduling</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you want to execute a pipeline (repeatedly) on a certain moment without user interaction, you can use the job scheduling functionality of XSLWeb. The jobs can be defined and scheduled in the <em>webapp.xml</em> configuration file, for example:</p>
</div>
<div class="listingblock">
<div class="title">Job scheduling</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;job&gt;
  &lt;name&gt;MyJob&lt;/name&gt;
  &lt;uri&gt;job/my-job&lt;/uri&gt;
  &lt;!-- Execute at 10:15am on the 15th day of every month: --&gt;
  &lt;cron&gt;0 15 10 15 * ?&lt;/cron&gt;
  &lt;concurrent&gt;false&lt;/concurrent&gt;
&lt;/job&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The elements have the following meaning:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>name</em>: the name of the scheduled job. Used in log files.</p>
</li>
<li>
<p><em>uri</em>: the Uri of the request to a pipeline within the current webapp. This internal request will follow the same flow of a normal HTTP request, including the request dispatcher stylesheet. The Uri does not contain the name of the webapp.</p>
</li>
<li>
<p><em>cron</em>: the cron expression which is a string comprising five or six fields separated by white space that represents a set of times to execute the job (see <a href="http://en.wikipedia.org/wiki/Cron#CRON_expression" class="bare">http://en.wikipedia.org/wiki/Cron#CRON_expression</a>).</p>
</li>
<li>
<p><em>concurrent</em>: specifies whether or not the job can run concurrently with other jobs.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user-authentication"><a class="anchor" href="#user-authentication"></a><a class="link" href="#user-authentication">9. User authentication</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can implement (BASIC) user authentication by performing the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Include the stylesheet <em>«xslweb-home»/xsl/system/authentication/basic/basic-authentication.xsl</em> in your <em>request-dispatcher.xsl</em> stylesheet.</p>
</li>
<li>
<p>Implement the function <em>auth:must-authenticate($request as element(request:request))): xs:boolean</em>. In this function you can determine whether <em>$request</em> must be authenticated or not.</p>
</li>
<li>
<p>Implement the function <em>auth:get-realm(): xs:string</em>. This function must return the authentication realm.</p>
</li>
<li>
<p>Implement the function <em>auth:login($username as xs:string, $password as xs:string): element()?</em>. This function must authenticate $username with $password and return an empty sequence if the authentication failed or an element() containing the user profile if authentication succeeded. This element must have the name <em>authentication</em> and a subelement <em>ID</em>. The element <em>data</em> can be filled with arbitrary data you will need in subsequent requests.</p>
</li>
<li>
<p>This element will be stored by XSLWeb in the user&#8217;s session object under the name <em>xslweb-userprofile</em> so it will be available in subsequent requests.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>N.B. DIGEST or other authentication methods are not yet supported. BASIC (and DIGEST) authentication is only secure if HTTPS is used!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="global-properties"><a class="anchor" href="#global-properties"></a><a class="link" href="#global-properties">10. Global configuration properties</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In <em>«xslweb-home»/config/xslweb.properties</em> two global properties can be set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>xslweb.trustallcerts</strong>: specifies if all SSL certificates must be trusted when XSLWeb connects to an external HTTPS server.</p>
</li>
<li>
<p><strong>xslweb.parserhardening</strong>: specifies if the Xerces XML parser must be configured to resist <a href="https://www.owasp.org/index.php/XML_External_Entity_(XXE)_Prevention_Cheat_Sheet">XML External Entity (XXE)</a> attacks.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="xpath-extension-function-library"><a class="anchor" href="#xpath-extension-function-library"></a><a class="link" href="#xpath-extension-function-library">11. XPath extension function library</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="built-in-extension-functions"><a class="anchor" href="#built-in-extension-functions"></a><a class="link" href="#built-in-extension-functions">11.1. Built in extension functions</a></h3>
<div class="paragraph">
<p>XSLWeb contains a set of readily available XPath extension functions. To use these extension functions in your XSLT stylesheets you only have to declare the namespace they are defined in.</p>
</div>
</div>
<div class="sect2">
<h3 id="response-functions"><a class="anchor" href="#response-functions"></a><a class="link" href="#response-functions">11.2. Response functions</a></h3>
<div class="paragraph">
<p>These functions can be used to set/change specific information in the HTTP response. For a large part this information can also be specified in the Response XML document, see <a href="#appendix-response-xml-example">Appendix B: Response XML example</a> for an example of a Response XML document.</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/request</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function response:add-cookie($cookie as element(response:cookie)) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adds the specified HTTP cookie to the response. An example of a cookie element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;xsl:variable name="my-cookie" as="element(resp:cookie)"&gt;
  &lt;resp:cookie&gt;
    &lt;!-- Comment describing the purpose of this cookie: --&gt;
    &lt;resp:comment&gt;Comment 1&lt;/resp:comment&gt;
    &lt;!-- The domain within which this cookie should be presented: --&gt;
    &lt;resp:domain&gt;
      &lt;xsl:value-of select="/*/req:server-name"/&gt;
    &lt;/resp:domain&gt;
    &lt;!-- The maximum age in seconds for this cookie: --&gt;
    &lt;resp:max-age&gt;-1&lt;/resp:max-age&gt;
    &lt;!-- The name of the cookie --&gt;
    &lt;resp:name&gt;cookie-1&lt;/resp:name&gt;
    &lt;!-- The path for the cookie to which the client should
         return the cookie: --&gt;
    &lt;resp:path&gt;
      &lt;xsl:value-of select="/*/req:context-path"/&gt;
    &lt;/resp:path&gt;
    &lt;!-- Indicates to the browser whether the cookie should only
         be sent using a secure protocol, such as HTTPS or SSL: --&gt;
    &lt;resp:is-secure&gt;false&lt;/resp:is-secure&gt;
    &lt;!-- The value of the cookie --&gt;
    &lt;resp:value&gt;cookie-1-value&lt;/resp:value&gt;
    &lt;!-- The version of the cookie protocol that this Cookie
         complies with: --&gt;
    &lt;resp:version&gt;0&lt;/resp:version&gt;
  &lt;/resp:cookie&gt;
&lt;/xsl:variable&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>XSLWeb makes uses of the Java Cookie mechanism. See <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/Cookie.html">Cookie</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function response:add-date-header($name as xs:string, $value as xs:dateTime) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adds a HTTP response header with the given name and date-value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function response:add-int-header($name as xs:string, $value as xs:integer) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adds a HTTP response header with the given name and integer value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function response:add-header($name as xs:string, $value as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adds a HTTP response header with the given name and value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function response:encode-redirect-url($url as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="paragraph">
<p>Encodes the specified URL for use in the send-redirect function or, if encoding is not needed, returns the URL unchanged.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function response:encode-url($url as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="paragraph">
<p>Encodes the specified URL by including the session ID, or, if encoding is not needed, returns the URL unchanged.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function response:is-committed() as xs:boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns a boolean indicating if the response has been committed. A committed response has already had its status code and headers written.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function response:set-buffer-size($size as xs:integer) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets the preferred buffer size for the body of the response. The servlet container will use a buffer at least as large as the size requested. A larger buffer allows more content to be written before anything is actually sent, thus providing XSLWeb with more time to set appropriate status codes and headers. A smaller buffer decreases server memory load and allows the client to start receiving data more quickly. This function must be called before any response body content is written</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function response:set-status($status as xs:integer) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets the HTTP status code for this response.</p>
</div>
<div class="paragraph">
<p>See example 5 how to use the response functions to set cookies.</p>
</div>
</div>
<div class="sect2">
<h3 id="session-functions"><a class="anchor" href="#session-functions"></a><a class="link" href="#session-functions">11.3. Session functions</a></h3>
<div class="paragraph">
<p>HTTP protocol and Web Servers are stateless, what it means is that for web server every request is a new request to process and they can’t identify if it’s coming from client that has been sending request previously.</p>
</div>
<div class="paragraph">
<p>But sometimes in web applications, we should know who the client is and process the request accordingly. For example, a shopping cart application should know who is sending the request to add an item and in which cart the item has to be added or who is sending checkout request so that it can charge the amount to correct client.</p>
</div>
<div class="paragraph">
<p>Session is a conversional state between client and server and it can consists of multiple request and response between client and server. Since HTTP and Web Server both are stateless, the only way to maintain a session is when some unique information about the session (session id) is passed between server and client in every request and response.</p>
</div>
<div class="paragraph">
<p>XSLWeb makes use of the <a href="https://www.codejava.net/java-ee/servlet/how-to-use-session-in-java-web-application">session mechanism</a> of the Java Application Server is runs on, see <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html">HttpSession</a>.</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/session</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function session:attribute-names() as xs:string*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns a sequence of strings containing the names of all attributes bound to this session.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function session:get-attribute($name as xs:string) as item()*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the attribute bound with the specified $name in this session, or an empty sequence if no attribute is bound under the name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function session:invalidate() as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Invalidates this session then unbinds any attributes bound to it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function session:set-attribute($name as xs:string, attr as item()*) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Binds an attribute to this session, using the name specified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function session:set-max-active-interval($interval as xs:integer) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifies the time, in seconds, between client requests before the servlet container will invalidate this session automatically.</p>
</div>
<div class="paragraph">
<p>See example 7 how to use the session functions to set and get session attributes.</p>
</div>
</div>
<div class="sect2">
<h3 id="webapp-functions"><a class="anchor" href="#webapp-functions"></a><a class="link" href="#webapp-functions">11.4. Webapp functions</a></h3>
<div class="paragraph">
<p>These functions can be used to get and set web application specific attributes. These can be used to share session independent attribute between multiple requests within one web application.</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/webapp</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function webapp:get-attribute($name as xs:string) as item()*</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function webapp:get-cache-value($cache-name as xs:string, $key-name as xs:string) as item()*</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function webapp:set-attribute($name as xs:string, attr as item()*) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function webapp:set-cache-value($cache-name as xs:string, $key-name as xs:string, $attrs as item()*, $time-to-idle as xs:integer, $time-to-live as xs:integer) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>See example 7 how to use the webapp functions to set and get webapp attributes, and example 14 how to use the caching functions.</p>
</div>
</div>
<div class="sect2">
<h3 id="context-functions"><a class="anchor" href="#context-functions"></a><a class="link" href="#context-functions">11.5. Context functions</a></h3>
<div class="paragraph">
<p>These functions can be used to get and set “XSLWeb context” specific attributes. These can be used to share attributes between web applications.</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/context</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function context:get-attribute($name as xs:string) as item()*</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function context:set-attribute($name as xs:string, attr as item()*) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>See example 7 how to use the context functions to set and get session attributes.</p>
</div>
</div>
<div class="sect2">
<h3 id="expath-file-functions"><a class="anchor" href="#expath-file-functions"></a><a class="link" href="#expath-file-functions">11.6. EXPath File</a></h3>
<div class="paragraph">
<p>EXPath File is a standard file system API for XPath. It defines extension functions to perform file system related operations such as listing, reading, writing, copying and moving files or directories. The API is described <a href="http://expath.org/spec/file">here</a>.</p>
</div>
<div class="paragraph">
<p>Namespace: <em><a href="http://expath.org/ns/file" class="bare">http://expath.org/ns/file</a></em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:exists($path as xs:string) as xs:boolean</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:is-dir($path as xs:string) as xs:boolean</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:is-file($path as xs:string) as xs:boolean</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:last-modified($path as xs:string) as xs:dateTime</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:size($file as xs:string) as xs:integer</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:append($file as xs:string, $items as item()*) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:append($file as xs:string, $items as item()*, $params as element(output:serialization-parameters)) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:append-binary($file as xs:string, $value as xs:base64Binary) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:append-text($file as xs:string, $value as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:append-text($file as xs:string, $value as xs:string, $encoding as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:append-text-lines($file as xs:string, $values as xs:string*) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:append-text-lines($file as xs:string, $lines as xs:string*, $encoding as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:copy($source as xs:string, $target as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:create-dir($dir as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:create-temp-dir($prefix as xs:string, $suffix as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:create-temp-dir($prefix as xs:string, $suffix as xs:string, $dir as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:create-temp-file($prefix as xs:string, $suffix as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:create-temp-file($prefix as xs:string, $suffix as xs:string, $dir as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:delete($path as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:delete($path as xs:string, $recursive as xs:boolean) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:list($dir as xs:string) as xs:string*</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:list($dir as xs:string, $recursive as xs:boolean) as xs:string*</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:list($dir as xs:string, $recursive as xs:boolean, $pattern as xs:string) as xs:string*</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:move($source as xs:string, $target as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:read-binary($file as xs:string) as xs:base64Binary</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:read-binary($file as xs:string, $offset as xs:integer) as xs:base64Binary</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:read-binary($file as xs:string, $offset as xs:integer, $length as xs:integer) as xs:base64Binary</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:read-text($file as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:read-text($file as xs:string, $encoding as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:read-text-lines($file as xs:string) as xs:string*</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:read-text-lines($file as xs:string, $encoding as xs:string) as xs:string*</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:write($file as xs:string, $items as item()*) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:write($file as xs:string, $items as item()*, $params as element(output:serialization-parameters)) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:write-binary($file as xs:string, $value as xs:base64Binary) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:write-binary($file as xs:string, $value as xs:base64Binary, $offset as xs:integer) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:write-text($file as xs:string, $value as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:write-text($file as xs:string, $value as xs:string, $encoding as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:write-text-lines($file as xs:string, $values as xs:string*) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:write-text-lines($file as xs:string, $values as xs:string*, $encoding as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:name($path as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:parent($path as xs:string) as xs:string?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:path-to-native($path as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:path-to-uri($path as xs:string) as xs:anyURI</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:resolve-path($path as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:dir-separator() as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:line-separator() as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:path-separator() as xs:string</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function file:temp-dir() as xs:string</code></pre>
</div>
</div>
<div class="paragraph">
<p>The structure of <em>element(output:serialization-parameters)</em> is described in <a href="http://www.w3.org/TR/xslt-xquery-serialization-30/">XSLT and XQuery Serialization 3.0</a>. See example 10 how to use some of the EXPath File functions.</p>
</div>
</div>
<div class="sect2">
<h3 id="expath-http-client-functions"><a class="anchor" href="#expath-http-client-functions"></a><a class="link" href="#expath-http-client-functions">11.7. EXPath HTTP Client</a></h3>
<div class="paragraph">
<p>These functions are an implementation of the specification: <a href="http://expath.org/spec/http-client">EXPath - HTTP Client Module</a> based on the Java HTTP client library <a href="https://square.github.io/okhttp/">OkHttp</a>. It is an XSLWeb “native” implementation. The API defines one extension function to perform HTTP requests and handle responses.</p>
</div>
<div class="paragraph">
<p>EXPath HTTP Client provides a lot more functionality than XSLT’s document() function:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Execution of other HTTP methods (POST, HEAD, PUT, DELETE etc), making it possible to consume both SOAP and REST based web services.</p>
</li>
<li>
<p>Request text or even binary documents.</p>
</li>
<li>
<p>Authentication (Basic and Digest).</p>
</li>
<li>
<p>Specify HTTP headers in the request and read the HTTP headers of the response.</p>
</li>
<li>
<p>Execute requests to HTML pages and parse them as well-formed XML.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Not implemented at this time:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Multipart responses (multipart requests are supported)</p>
</li>
<li>
<p>Other authentication methods than "Basic"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Extensions to the specifications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Proxy server support via the attributes "http:request/@proxy-host","http:request/@proxy-port", "http:request/@proxy-username", "http:request/@proxy-password"</p>
</li>
<li>
<p>Trust all SSL certificates via the attribute http:request/@trust-all-certs (xs:boolean, default: false())</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Further remarks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The default timeout (connect/write/read/cal) is 30 seconds (can be changed via http:request/@timeout)</p>
</li>
<li>
<p>Certificate authorities of the host platform are trusted</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Namespace: <em><a href="http://expath.org/ns/http-client" class="bare">http://expath.org/ns/http-client</a></em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function http:send-request($request as element(http:request)) as item()</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function http:send-request($request as element(http:request)?, $href as xs:string?) as item()+</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function http:send-request($request as element(http:request)?, $href as xs:string?, $bodies as item()*) as item()+</code></pre>
</div>
</div>
<div class="paragraph">
<p>See examples 11 and 21 how to use some of the EXPath HTTP Client function.</p>
</div>
</div>
<div class="sect2">
<h3 id="base64-functions"><a class="anchor" href="#base64-functions"></a><a class="link" href="#base64-functions">11.8. Base64</a></h3>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/base64</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function base64:encode($str as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="paragraph">
<p>Encodes a string using the base64 algorithm but does not chunk the output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function base64:decode($str as xs:string) as xs:string</code></pre>
</div>
</div>
<div class="paragraph">
<p>Decodes a Base64 string into octets which then are converted to a UTF-8 string.</p>
</div>
</div>
<div class="sect2">
<h3 id="external-functions"><a class="anchor" href="#external-functions"></a><a class="link" href="#external-functions">11.9. Execute external processes</a></h3>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/exec</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function external:exec-external(
  $command-line as xs:string,
  $args as xs:string*,
  $exit-value as xs:integer?,
  $time-out as xs:integer?,
  $async as xs:boolean) as xs:integer</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where $command-line is the path to the executable, $args a sequence of arguments to the application, $exit-value the exit code that is considered as success, $time-out the time in milliseconds after an asynchronous process is killed and $async indicates if the process must be started asynchronous or not.</p>
</div>
</div>
<div class="sect2">
<h3 id="logging-functions"><a class="anchor" href="#logging-functions"></a><a class="link" href="#logging-functions">11.10. Logging functions</a></h3>
<div class="paragraph">
<p>Logging functionality. The logging information is written to the main XSLWeb log file, default <em>«xslweb-home»</em>/logs/xslweb.log.</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/log</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function log:log($level as xs:string, $message as item()*) as xs:boolean</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function log:log(
  $level as xs:string,
  $message as item()*,
  $params as element(output:serialization-parameters)) as xs:boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where $level is one of “ERROR”, “WARN”, “INFO” or “DEBUG”. The structure of <em>element(output:serialization-parameters)</em> is described in <a href="http://www.w3.org/TR/xslt-xquery-serialization-30/">XSLT and XQuery Serialization 3.0</a>. See example 15 how to use some of the log functions.</p>
</div>
</div>
<div class="sect2">
<h3 id="email-functions"><a class="anchor" href="#email-functions"></a><a class="link" href="#email-functions">11.11. Email</a></h3>
<div class="paragraph">
<p>Functionality for sending e-mail via SMTP.</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/email</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function email:send-email($email as element(email:email)) as xs:boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p>See example 12 how to use the send-email example and an example of the structure of <em>element(email:email)</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="serialization-functions"><a class="anchor" href="#serialization-functions"></a><a class="link" href="#serialization-functions">11.12. Serialization</a></h3>
<div class="paragraph">
<p>Functionality for serializing a node to a string.</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/serialize</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function ser:serialize($nodes as node()*, $options as element(output:serialization-parameters)?) as xs:string</code></pre>
</div>
</div>
<div class="paragraph">
<p>The structure of <em>element(output:serialization-parameters)</em> is described in <a href="http://www.w3.org/TR/xslt-xquery-serialization-30/">XSLT and XQuery Serialization 3.0</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<strong>Deprecated:</strong> use <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize" class="bare">https://www.w3.org/TR/xpath-functions-31/#func-serialize</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="caching-functions"><a class="anchor" href="#caching-functions"></a><a class="link" href="#caching-functions">11.13. Caching</a></h3>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/cache</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="paragraph">
<p>Remove a cache entry from the response output cache:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function cache:remove($cache-key as xs:string) as xs:boolean?</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="image-processing-functions"><a class="anchor" href="#image-processing-functions"></a><a class="link" href="#image-processing-functions">11.14. Image processing</a></h3>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/image</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function img:scale($source as xs:string, $target as xs:string, $format-name as xs:string, $target-size as xs:integer) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Resizes an image and optionally convert it to another format. $source is the path or url to the source image, $target the path to the scaled image, $format-name the name of the target format (like png, gif, jpg) and $target-size the maximum image width or height of the scaled image.</p>
</div>
</div>
<div class="sect2">
<h3 id="io-functions"><a class="anchor" href="#io-functions"></a><a class="link" href="#io-functions">11.15. Input/Output</a></h3>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/io</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function io:register-temp-file($path as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Registers a temporary file or directory that will automatically be deleted after the pipeline has executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="util-functions"><a class="anchor" href="#util-functions"></a><a class="link" href="#util-functions">11.16. Utilities</a></h3>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/util</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function util:discard-document($document-node()) as document-node()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remove supplied document from memory pool so it will be released by the Java garbage collector.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function util:parse($serialized-xml as xs:string) as document-node()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parse a XML string to a document node.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<strong>Deprecated:</strong> use <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml" class="bare">https://www.w3.org/TR/xpath-functions-31/#func-parse-xml</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="zip-functions"><a class="anchor" href="#zip-functions"></a><a class="link" href="#zip-functions">11.17. Zip/Unzip</a></h3>
<div class="paragraph">
<p>(Un)zip functionality</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/zip</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function zip:zip($source as xs:string, $target as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Zip a file on path $source to a new file on path $target:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function zip:unzip($source as xs:string, $target as xs:string) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unzip a file on path or url $source to a new file on path $target:</p>
</div>
<div class="paragraph">
<p>See also <a href="#zip-serializer-step">zip-serializer step</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="uuid-functions"><a class="anchor" href="#uuid-functions"></a><a class="link" href="#uuid-functions">11.18. UUID</a></h3>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/uuid</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function uuid:uuid() as xs:string</code></pre>
</div>
</div>
<div class="paragraph">
<p>Generate a  type 4 (pseudo randomly generated) universally unique identifier.</p>
</div>
</div>
<div class="sect2">
<h3 id="json-functions"><a class="anchor" href="#json-functions"></a><a class="link" href="#json-functions">11.19. JSON</a></h3>
<div class="paragraph">
<p>(Experimental)</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/json</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function json:serialize-json($items as item()*) as xs:string</code></pre>
</div>
</div>
<div class="paragraph">
<p>Serializes a sequence of items to a JSON representation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function json:parse-json($json as xs:string) as document-node()?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parses a JSON string to a document node.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function json:escape-json($str as xs:string) as xs:string?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Escapes the characters in $str using JSON string rules.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function json:unescape-json($json as xs:string) as xs:string?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unescapes any JSON literals found in $json.</p>
</div>
<div class="paragraph">
<p>See also <a href="#json-serializer-step">json-serializer step</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Alternative: now you can also use the standard XPath 3.1 functions, see: <a href="https://www.w3.org/TR/xpath-functions-31/#json-functions" class="bare">https://www.w3.org/TR/xpath-functions-31/#json-functions</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="dynfunc-functions"><a class="anchor" href="#dynfunc-functions"></a><a class="link" href="#dynfunc-functions">11.20. Dynamic (scripted) extension functions</a></h3>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/dynfunc</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function dynfunc:register($java-classes as xs:string+) as element(function:diagnostics)?</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function registers (makes available within an XSLWeb web application) one or more extension functions that are implemented in one or more Java classes defined in <strong>$java-classes</strong>. Methods that implement an extension function must be annotated with the Java annotation <strong>ExtensionFunction</strong>, for instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import nl.armatiek.xslweb.saxon.functions.dynfunc.ExtensionFunction;
import org.apache.commons.lang3.StringUtils;

public class MyExtensionFunctions {

  /* Adds two integers: */
  @ExtensionFunction(
      uri="http://example.com/functions/test",
      name="add",
      hasSideEffects=false)
  public int add(int x, int y) {
    return x + y;
  }

  /* Removes diacritics from a string. The case will not be altered: */
  @ExtensionFunction(
      uri="http://example.com/functions/test",
      name="strip-accents",
      hasSideEffects=false)
  public String stripAccents(String text) {
    return StringUtils.stripAccents(text);
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation defines the namespace uri and local name of the (qualified name of the) extension function on the XPath side and whether the extension function has side effects.</p>
</div>
<div class="paragraph">
<p>The Java code needs to be registered only once. After registering, the extension functions will be available in further XSLT transformations that are executed within the XSLWeb webapp in which the code was registered. Therefore the template <strong>event:webapp-open</strong> in <strong>events.xsl</strong> is a suitable location to register dynamic extension functions.</p>
</div>
<div class="paragraph">
<p>The Java classes must not contain a package declaration. All Java classes are supposed to be in the same (WebApp specific) package which is automatically added to the code before compilation.</p>
</div>
<div class="paragraph">
<p>The arguments and return type of the methods that implement an extension function must be of one of the following primitive types, interfaces or classes <strong>or arrays thereof</strong>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Java class</th>
<th class="tableblock halign-left valign-top">Equivalent XPath type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:boolean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:boolean?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:string?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CharSequence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:string?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:integer?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:integer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:integer?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:short</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:short?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:byte **</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:byte?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:float</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:float?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:double?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.net.URI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:anyURI?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.net.URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:anyURI?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.math.BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:integer?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.math.BigDecimal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:decimal?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:dateTime?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.s9api.QName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:QName</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.StringValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:string?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.BooleanValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:boolean?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.DoubleValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:double?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.FloatValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:float?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.DecimalValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:decimal?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.IntegerValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:integer?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.AnyURIValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:anyURI?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.QNameValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:QName?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.DateValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:date?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.DateTimeValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:dateTime?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.TimeValue.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:time?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.DurationValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:duration?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.DayTimeDurationValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:duration?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.YearMonthDurationValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:duration?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.GYearValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:gYear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.GYearMonthValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:gYearMonth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.GMonthValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:gMonth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.GMonthDayValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:gMonthDay</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.GDayValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:gDay</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.Base64BinaryValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:base64Binary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.value.HexBinaryValue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xs:hexBinary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.om.Function</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">function()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.ma.map.MapItem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">map(*)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.om.NodeInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">node(), element(), attribute(), text(), comment(), processing-instruction()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.om.TreeInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">document-node()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">net.sf.saxon.expr.XPathContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current Saxon XPathContext object *</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nl.armatiek.xslweb.configuration.Context</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current XSLWeb Context object *</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nl.armatiek.xslweb.configuration.WebApp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current XSLWeb WebApp object *</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javax.servlet.http.HttpSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current JEE session object *</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javax.servlet.http.HttpServletRequest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current JEE request object *</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javax.servlet.http.HttpServletResponse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current JEE response object *</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>(<strong>) These objects does not have to be specified in the XPath function call, only as arguments in the Java call method. These arguments must be specified first, before arguments that are specified in the XPath function call.<br>
(</strong>*) byte[] maps to xs:unsignedByte*</p>
</div>
<div class="paragraph">
<p>When the extension function is called from XPath, the equivalent XPath type (from the second column) must be used.</p>
</div>
<div class="paragraph">
<p>If the registration and code compilation succeeds, the function will return an empty sequence. When there are errors or warnings during code compilation, the function will return an element function:diagnostics. An example of such diagnostics element is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dynfunc:diagnostics&gt;
  &lt;dynfunc:diagnostic
    code="compiler.err.cant.resolve.location"
    line="8"
    column="46"
    start="255"
    end="280"
    kind="ERROR"
    message="cannot find symbol
    symbol:   class LongestCommonSubsequenceX
    location: class Example21"
    position="255"/&gt;
&lt;/dynfunc:diagnostics&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Within the extension function code all Java classes from the classpath of the XSLWeb Java web application can be used or imported.</p>
</div>
<div class="paragraph">
<p>The function can raise an exception with one of the following error codes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">err:DF001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generic error compiling and registering extension function classes, %s</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">err:DF002</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No Java compiler could be found. Are you using a JDK version of the Java platform?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">err:DF003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Could not determine classname from code unit %d</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function dynfunc:is-registered($function-name as xs:QName) as xs:boolean</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function can be used to query if a function with name <strong>$function-name</strong> is already registered within the current XSLWeb web application. The standard XSLT functions <a href="https://www.w3.org/TR/xslt-30/#function-function-available"><strong>fn:function-available()</strong></a> can also be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">dynfunc:call($function-name as xs:QName, $arg-1 as item()* ... $arg-n as item()*) as item()*</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function can be used to execute a extension function that was registered before using the function <strong>dynfunc:register</strong>. The first argument is the qualified name of the function, the other arguments are the function parameters.</p>
</div>
<div class="paragraph">
<p>The function can raise an exception with one of the following error codes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">err:DF010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No function with name %s is registered</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">err:DF011</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of supplied arguments in the call to the XPath extension function %s (%d) does not match the number of declared arguments in the Java method (%d)[ , considering %d implicit objects]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">err:DF012</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conversion from %s to %s is not supported</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">err:DF013</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A wrapped Java InvocationTargetException, IllegalAccessException, IllegalArgumentException or InstantiationException</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A complete example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:dynfunc="http://www.armatiek.com/xslweb/functions/dynfunc"
  xmlns:err="http://www.w3.org/2005/xqt-errors"
  exclude-result-prefixes="#all"
  version="3.0"&gt;

  &lt;xsl:template name="my-template"&gt;

    &lt;xsl:variable name="code-units" as="xs:string+"&gt;
      &lt;xsl:text&gt;
      &lt;![CDATA[
      import nl.armatiek.xslweb.saxon.functions.dynfunc.ExtensionFunction;
      import org.apache.commons.lang3.StringUtils;

      public class MyExtensionFunctions {

        /* Removes diacritics from a string. The case will not be altered: */
        @ExtensionFunction(
            uri="http://example.com/functions/test",
            name="strip-accents",
            hasSideEffects=false)
        public String stripAccents(String text) {
          return StringUtils.stripAccents(text);
        }

      }
      ]]&gt;
      &lt;/xsl:text&gt;
    &lt;/xsl:variable&gt;

    &lt;!-- Register the extension functions in the Java code: --&gt;
    &lt;xsl:variable
      name="result"
      select="dynfunc:register($code-units)"
      as="element(dynfunc:diagnostics)?"/&gt;

    &lt;xsl:choose&gt;
      &lt;!-- Check the registration result: --&gt;
      &lt;xsl:when test="$result/dynfunc:diagnostic/@kind = 'ERROR'"&gt;
        &lt;xsl:sequence select="$result"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;!-- Call the functions: --&gt;
        &lt;xsl:try&gt;
          &lt;xsl:variable
            name="function-name"
            select="QName('http://example.com/functions/test', 'strip-accents')"
            as="xs:QName"/&gt;
          &lt;xsl:sequence select="dynfunc:call($function-name, 'naïve fiancé')"/&gt;
          &lt;xsl:catch&gt;
            &lt;xsl:value-of select="$err:description"/&gt;
          &lt;/xsl:catch&gt;
        &lt;/xsl:try&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sql-functions"><a class="anchor" href="#sql-functions"></a><a class="link" href="#sql-functions">11.21. SQL</a></h3>
<div class="paragraph">
<p>Functionality to query data from and store data in a relational database. These extension functions make use of the <a href="http://en.wikipedia.org/wiki/Java_Database_Connectivity">Java JDBC</a> framework. You can place the JDBC driver for your database in the directory <em>«xslweb-home»/common/lib</em> (restart required). Then you can define a datasource in the <em>datasources</em> section of the application’s <em>webapp.xml</em>, for instance for a <a href="http://www.h2database.com/html/main.html">H2</a> database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;datasource&gt;
  &lt;name&gt;my-datasource&lt;/name&gt;
  &lt;driver-class&gt;org.h2.Driver&lt;/driver-class&gt;
  &lt;jdbc-url&gt;jdbc:h2:file://${webapp-dir}/database/my-database.mv&lt;/jdbc-url&gt;
  &lt;property name="user"&gt;sa&lt;/property&gt;
&lt;/datasource&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the extension function <em>sql:get-connection(“my-datasource”)</em> a database connection can be retrieved from the connection pool. This connection then can be used to execute one or more queries.</p>
</div>
<div class="paragraph">
<p>The connection pool is implemented using the Java connection pool framework <a href="http://www.mchange.com/projects/c3p0/">c3p0</a>. The c3p0 specific properties that can be used in the datasource definition in <em>webapp.xml</em> are described <a href="http://www.mchange.com/projects/c3p0/#configuration_properties">here</a>. De default c3p0 properties can be configured in the configuration file <em>«xslweb-home»/config/c3p0-config.xml</em>.</p>
</div>
<div class="paragraph">
<p>Connections and resultsets can be explicitly closed by using the extension function <em>sql:close()</em>. The <em>sql:close()</em> function on a connection will also return the connection to the connection pool. Connections and resultsets that are not closed that way will be implicitly closed at the end of the pipeline, and connections will be returned to the connection pool automatically.</p>
</div>
<div class="paragraph">
<p>JDBC drivers are available for most relational database systems (like MySQL, Oracle, PostgreSQL, MSSQL Server, Sybase, Cloudscape and Firebird), but also for non-relational database datasources like CSV files and LDAP directory services (untested).</p>
</div>
<div class="paragraph">
<p>Namespace: <em>http://www.armatiek.com/xslweb/functions/sql</em></p>
</div>
<div class="paragraph">
<p>Functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function sql:close($connection as java.sql.Connection) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Closes a database connection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function sql:close($resultset as java.sql.ResultSet) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Closes a result set.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function sql:commit($connection as java.sql.Connection) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Makes all changes made since the previous commit/rollback permanent and releases any database locks currently held by this Connection object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function sql:execute-query($connection as java.sql.Connection, $sql as xs:string) as java.sql.ResultSet</code></pre>
</div>
</div>
<div class="paragraph">
<p>Executes query $sql and returns the result of the query as a Java ResultSet object. This ResultSet can then be passed to the function <em>sql:get-next-row()</em> to iterate through the records of the resultset, or <em>sql:resultset-to-node()</em> to get an XML representation of the complete resultset.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function sql:get-connection(
  $name as xs:string,
  $username as xs:string?,
  $password as xs:string?,
  $readonly as xs:boolean?,
  $autocommit as xs:boolean?) as java.sql.Connection</code></pre>
</div>
</div>
<div class="paragraph">
<p>Creates or gets a database connection. XSLWeb uses a connection pool for fast creation and reuse of database connections. This function returns a Java Connection object that can be passed as a parameter to other sql functions. $name is the name of a datasource specification in the webapp.xml of the web application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function sql:get-next-row($resultset as java.sql.ResultSet) as xs:anyAtomicType*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the next row in a Java ResultSet represented as a sequence of atomic types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function sql:rollback($connection as java.sql.Connection) as xs:boolean?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Undoes all changes made in the current transaction and releases any database locks currently held by this Connection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xquery hljs" data-lang="xquery">function sql:resultset-to-node($resultset as java.sql.ResultSet) as element()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns an XML representation of the complete ResultSet.</p>
</div>
<div class="paragraph">
<p>See example 22 how to use some of the sql extension functions.</p>
</div>
</div>
<div class="sect2">
<h3 id="custom-extension-functions"><a class="anchor" href="#custom-extension-functions"></a><a class="link" href="#custom-extension-functions">11.22. Custom extension functions</a></h3>
<div class="paragraph">
<p>It is also possible to write your own custom XPath extension functions in Java and add them to an XSLWeb web application. These extension functions must be <a href="http://www.saxonica.com/html/documentation/extensibility/integratedfunctions/ext-full-J.html">integrated extension functions</a> that use the full interface of Saxon version 9.9.</p>
</div>
<div class="paragraph">
<p>The compiled jar of a custom extension function together with any libraries that the function depend on can be placed in the folder <em>«web-app»/lib</em>. There is no need to restart the application server, XSLWeb will detect the jars and will load and register the extension function automatically.</p>
</div>
</div>
<div class="sect2">
<h3 id="side-effects"><a class="anchor" href="#side-effects"></a><a class="link" href="#side-effects">11.23. Extension functions with side effects</a></h3>
<div class="paragraph">
<p>A number of the extension functions described in previous sections perform a certain task and thereby change the state of something outside the stylesheet, like write or log to a file, send an e-mail etc. These functions don’t have any return information and should have an empty sequence as their return type. In XSLWeb, the return type of these functions is actually declared as <em>xs:boolean?</em> The reason is that in that case the Saxon XSLT optimizer cannot ignore these functions, because they could add something to the result tree (a boolean value). In reality, these functions never return this boolean value and always return an empty sequence. Therefore it is safe to do something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;xsl:sequence select="log:log('INFO', 'Hello World!')"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>without having to worry that something is written to the result tree.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install"><a class="anchor" href="#install"></a><a class="link" href="#install">12. Download, install and run XSLWeb</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The sources of XSLWeb can be found on <a href="https://github.com/Armatiek/xslweb">GitHub</a>. XSLWeb is licensed under the Apache License version 2.0.</p>
</div>
<div class="paragraph">
<p>Compiled binaries of XSLWeb 3.0.1 can be downloaded in two distributions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>As a .zip (Windows) or .tgz (Linux/macOS) archive, containing a single executable java library (.jar) with embedded application server (Apache Tomcat 7).</p>
</li>
<li>
<p>As a web application archive (.war)</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="install-jar"><a class="anchor" href="#install-jar"></a><a class="link" href="#install-jar">12.1. The single executable jar distribution</a></h3>
<div class="paragraph">
<p>This distribution contains the XSLWeb home directory and a single executable java library (xslweb.jar) with embedded application server (Tomcat 7). This distribution is the easiest to install and run and is most suitable to try out and develop applications in XSLWeb.</p>
</div>
<div class="sect3">
<h4 id="download"><a class="anchor" href="#download"></a><a class="link" href="#download">12.1.1. Download</a></h4>
<div class="paragraph">
<p>You can download the archives from the following locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Armatiek/xslweb/releases/download/v3.0.1/xslweb-3.0.1-jar.zip" class="bare">https://github.com/Armatiek/xslweb/releases/download/v3.0.1/xslweb-3.0.1-jar.zip</a> (Windows)</p>
</li>
<li>
<p><a href="https://github.com/Armatiek/xslweb/releases/download/v3.0.1/xslweb-3.0.1-jar.tgz" class="bare">https://github.com/Armatiek/xslweb/releases/download/v3.0.1/xslweb-3.0.1-jar.tgz</a> (Linux/macOS).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="install-2"><a class="anchor" href="#install-2"></a><a class="link" href="#install-2">12.1.2. Install</a></h4>
<div class="paragraph">
<p>Extract the archive to a directory of your choice. You will need the Java Runtime Environment (JRE) version 1.8 or higher. At a command line, check your Java version like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -version
openjdk version "13.0.2" 2020-01-14
OpenJDK Runtime Environment (build 13.0.2+8)
OpenJDK 64-Bit Server VM (build 13.0.2+8, mixed mode, sharing)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output will vary, but you need to make sure you have version 1.8 or higher. If no JRE/JDK is installed yet or you have an older version, download or install an <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle JDK</a> or an <a href="https://jdk.java.net/14/">OpenJDK download</a> / <a href="https://openjdk.java.net/install/">OpenJDK install</a>. <a href="https://blog.joda.org/2018/09/do-not-fall-into-oracles-java-11-trap.html">This article</a> will help you decide which to choose (TL;DR : Do not download or use the Oracle JDK unless you intend to pay for it).</p>
</div>
</div>
<div class="sect3">
<h4 id="run"><a class="anchor" href="#run"></a><a class="link" href="#run">12.1.3. Run</a></h4>
<div class="paragraph">
<p>The embedded jar version of XSLWeb can be started from the directory where the archive was extracted using the following command (one line):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -Dxslweb.home=./home -cp xslweb.jar;home/config org.apache.tomcat.maven.runner.Tomcat7RunnerCli</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following additional arguments are supported:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">-ajpPort &lt;ajpPort&gt; ajp port to use
-clientAuth enable client authentication for https
-D &lt;arg&gt; key=value
-extractDirectory &lt;extractDirectory&gt; path to extract war content, default value: .extract
-h,--help help
-httpPort &lt;httpPort&gt; http port to use
-httpProtocol &lt;httpProtocol&gt; http protocol to use: HTTP/1.1 or org.apache.coyote.http11.Http11Nio Protocol
-httpsPort &lt;httpsPort&gt; https port to use
-maxPostSize &lt;maxPostSize&gt; max post size in bytes to use
-keyAlias &lt;keyAlias&gt; alias from keystore for ssl
-loggerName &lt;loggerName&gt; logger to use: slf4j to use slf4j bridge on top of jul
-obfuscate &lt;password&gt; obfuscate the password and exit
-resetExtract clean previous extract directory
-serverXmlPath &lt;serverXmlPath&gt; server.xml to use, optional
-X,--debug debug</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can open a browser and go to the address <a href="http://localhost:8080" class="bare">http://localhost:8080</a>. A web page with the text “It works!” should appear. From here you can go to the examples and the documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="install-war"><a class="anchor" href="#install-war"></a><a class="link" href="#install-war">12.2. The Web Application Archive (.war) distribution</a></h3>
<div class="paragraph">
<p>This distribution contains the XSLWeb home directory and a web application archive (.war) and is most suitable to run XSLWeb in a production setting. The web application archive is a standard J2EE web application that can be installed on any Java application server that supports Servlet Spec 3.0 (Tomcat 7+, TomEE 1.6+, WebLogic, Jetty 8+, Glassfish 3+, JBoss AS 6.x/7.x etc.).</p>
</div>
<div class="sect3">
<h4 id="download-2"><a class="anchor" href="#download-2"></a><a class="link" href="#download-2">12.2.1. Download</a></h4>
<div class="paragraph">
<p>You can download the archives from the following locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Armatiek/xslweb/releases/download/v3.0.1/xslweb-3.0.1-war.zip" class="bare">https://github.com/Armatiek/xslweb/releases/download/v3.0.1/xslweb-3.0.1-war.zip</a> (Windows)</p>
</li>
<li>
<p><a href="https://github.com/Armatiek/xslweb/releases/download/v3.0.1/xslweb-3.0.1-war.tgz" class="bare">https://github.com/Armatiek/xslweb/releases/download/v3.0.1/xslweb-3.0.1-war.tgz</a> (Linux/macOS)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="install-3"><a class="anchor" href="#install-3"></a><a class="link" href="#install-3">12.2.2. Install</a></h4>
<div class="paragraph">
<p>Extract the archive to a directory of your choice. This directory will contain the directory xslweb-3.0.1 containing a directory called <em>home</em> and a file called <em>xslweb.war</em>. The installation of a war is application server specific, so please consult the manual of your server for that. Regardless of which application server is used, two settings are essential:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The home directory of XSLWeb must be specified using a Java System Property called <em>xslweb.home</em>.</p>
</li>
<li>
<p>The path <em>«xslweb-home»/config</em> must be added to the Java classpath.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="run-2"><a class="anchor" href="#run-2"></a><a class="link" href="#run-2">12.2.3. Run</a></h4>
<div class="paragraph">
<p>Start your application server. Open a web browser and go to the address:</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:&lt;port&gt;/xslweb" class="bare">http://localhost:&lt;port&gt;/xslweb</a></p>
</div>
<div class="paragraph">
<p>where port is the port your application server runs on. A web page with the text “It works!” should appear. From here you can go to the examples and the documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="install-xslweb-as-a-windows-service-or-linuxmacos-daemon"><a class="anchor" href="#install-xslweb-as-a-windows-service-or-linuxmacos-daemon"></a><a class="link" href="#install-xslweb-as-a-windows-service-or-linuxmacos-daemon">12.3. Install XSLWeb as a Windows service or Linux/macOS daemon</a></h3>
<div class="paragraph">
<p>One way to install XSLWeb as a Windows service or Linux/macOS daemon is to use <a href="http://yajsw.sourceforge.net/">YAJSW (Yet Another Java Service Wrapper)</a>. This installation involves the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute the steps described in sections 12.1.1 and 12.1.2.</p>
</li>
<li>
<p>Download YAJSW version 12.11+ from <a href="https://sourceforge.net/projects/yajsw/files/" class="bare">https://sourceforge.net/projects/yajsw/files/</a> and extract the archive in the directory created in step 1.</p>
</li>
<li>
<p>Create YAJSW wrapper config file <em>wrapper.xslweb.conf</em> and place it in YAJSW&#8217;s <em>conf</em> folder. You can use the example below. You may need to modify this example to:</p>
<div class="ulist">
<ul>
<li>
<p>Specify the location of java (wrapper.java.command)</p>
</li>
<li>
<p>Specify the installation directory of XSLWeb (wrapper.working.dir)</p>
</li>
<li>
<p>Change the amount of memory available to XSLWeb from 1024m (for example, 512m or 2048m)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># YAJSW configuration for XSLWeb

wrapper.java.command=C:/ProgramData/Oracle/Java/javapath/java.exe
wrapper.working.dir=D:\\xslweb-3.0.1
wrapper.java.app.mainclass=org.apache.tomcat.maven.runner.Tomcat7RunnerCli
wrapper.java.classpath.1 = xslweb.jar
wrapper.java.classpath.2 = home/config

wrapper.java.additional.1 = -Xmx1024m
wrapper.java.additional.2 = -Dfile.encoding=utf-8
wrapper.java.additional.3 = -Dxslweb.home=./home
wrapper.java.additional.4 = -Dorg.terracotta.quartz.skipUpdateCheck=true

wrapper.ntservice.name= XSLWEB_3_0
wrapper.ntservice.displayname= XSLWeb 3.0.1
wrapper.ntservice.description= XSLWeb 3.0.1
wrapper.ntservice.starttype=DELAYED_AUTO_START

wrapper.console.loglevel=INFO
wrapper.logfile=$\{wrapper.working.dir}/home/logs/wrapper-xslweb.log
wrapper.logfile.maxsize=10m
wrapper.logfile.maxfiles=10

wrapper.on_exit.0=SHUTDOWN
wrapper.on_exit.default=RESTART</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can add any optional arguments mentioned in section 12.1.3 as <em>wrapper.app.parameter.NN.</em></p>
</div>
<div class="paragraph">
<p>After you have created the wrapper configuration file:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt as administrator (Windows) or shell (Linux/macOS)</p>
</li>
<li>
<p>Navigate to the YAJSW folder</p>
</li>
<li>
<p>Install the service:<br>
java -jar wrapper.jar --install conf\wrapper.xslweb.conf</p>
</li>
<li>
<p>Start the service:<br>
java -jar wrapper.jar --start conf\wrapper.xslweb.conf</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>XSLWeb is now running as a service/daemon, and will start automatically when the operating system starts. Open a web browser and go to the address:</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:8080" class="bare">http://localhost:8080</a></p>
</div>
<div class="paragraph">
<p>A web page with the text “It works!” should appear. From here you can go to the examples and the documentation.</p>
</div>
<div class="paragraph">
<p>If you make changes to the configuration you can follow this sequence:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the service:<br>
java -jar wrapper.jar --stop conf\wrapper.xslweb.conf</p>
</li>
<li>
<p>Remove the service:<br>
java -jar wrapper.jar --remove conf\wrapper.xslweb.conf</p>
</li>
<li>
<p>Make your changes to the wrapper or application configuration.</p>
</li>
<li>
<p>Install the service:<br>
java -jar wrapper.jar --install conf\wrapper.xslweb.conf</p>
</li>
<li>
<p>Start the service:<br>
java -jar wrapper.jar --start conf\wrapper.xslweb.conf</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="support-for-saxon-pe-professional-and-ee-enterprise-edition"><a class="anchor" href="#support-for-saxon-pe-professional-and-ee-enterprise-edition"></a><a class="link" href="#support-for-saxon-pe-professional-and-ee-enterprise-edition">13. Support for Saxon PE (Professional) and EE (Enterprise Edition)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The downloadable binaries of XSLWeb contain the open source Home Edition (HE) of the Saxon XSLT processor. You can build a version of XSLWeb that contains Saxon PE or EE by following these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install Java 1.8+, maven 2.2.1+ and make a clone of the git repository <a href="https://github.com/Armatiek/xslweb.git" class="bare">https://github.com/Armatiek/xslweb.git</a>.</p>
</li>
<li>
<p>Purchase a PE or EE license from <a href="http://www.saxonica.com/" class="bare">http://www.saxonica.com/</a>.</p>
</li>
<li>
<p>Download the PE of EE package from <a href="https://www.saxonica.com/download/SaxonPE9-9-1-7J.zip" class="bare">https://www.saxonica.com/download/SaxonPE9-9-1-7J.zip</a> or <a href="https://www.saxonica.com/download/SaxonEE9-9-1-7J.zip" class="bare">https://www.saxonica.com/download/SaxonEE9-9-1-7J.zip</a></p>
</li>
<li>
<p>Extract and register the jars in your local Maven repository using the following commands:</p>
<div class="ulist">
<ul>
<li>
<p>PE:</p>
<div class="ulist">
<ul>
<li>
<p>mvn install:install-file -Dfile=saxon9pe.jar -DgroupId=net.sf.saxon -DartifactId=Saxon-PE -Dversion=9.9.1-7 -Dpackaging=jar</p>
</li>
<li>
<p>mvn install:install-file -Dfile=saxon9-icu.jar -DgroupId=net.sf.saxon -DartifactId=Saxon-PE-icu -Dversion=9.9.1-7 -Dpackaging=jar</p>
</li>
<li>
<p>mvn install:install-file -Dfile=saxon9-sql.jar -DgroupId=net.sf.saxon -DartifactId=Saxon-PE-sql -Dversion=9.9.1-7 -Dpackaging=jar</p>
</li>
</ul>
</div>
</li>
<li>
<p>EE:</p>
<div class="ulist">
<ul>
<li>
<p>mvn install:install-file -Dfile=saxon9ee.jar -DgroupId=net.sf.saxon -DartifactId=Saxon-EE -Dversion=9.9.1-7 -Dpackaging=jar</p>
</li>
<li>
<p>mvn install:install-file -Dfile=saxon9-icu.jar -DgroupId=net.sf.saxon -DartifactId=Saxon-EE-icu -Dversion=9.9.1-7 -Dpackaging=jar</p>
</li>
<li>
<p>mvn install:install-file -Dfile=saxon9-sql.jar -DgroupId=net.sf.saxon -DartifactId=Saxon-EE-sql -Dversion=9.9.1-7 -Dpackaging=jar</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Place your purchased license file <em>saxon-license.lic</em> in <a href="#xslweb.home">[xslweb.home]</a>/config</p>
</li>
<li>
<p>Build XSLWeb with the maven profile “Saxon-PE” or “Saxon-EE”:</p>
<div class="ulist">
<ul>
<li>
<p>mvn -PSaxon-PE clean install<br>
or</p>
</li>
<li>
<p>mvn -PSaxon-EE clean install</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-request-xml-example"><a class="anchor" href="#appendix-request-xml-example"></a><a class="link" href="#appendix-request-xml-example">14. Appendix A: Request XML example</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;request xmlns="http://www.armatiek.com/xslweb/request"&gt;
  &lt;character-encoding&gt;UTF-8&lt;/character-encoding&gt;
  &lt;content-length&gt;-1&lt;/content-length&gt;
  &lt;context-path&gt;/xslweb&lt;/context-path&gt;
  &lt;local-addr&gt;127.0.0.1&lt;/local-addr&gt;
  &lt;local-name&gt;127.0.0.1&lt;/local-name&gt;
  &lt;local-port&gt;8080&lt;/local-port&gt;
  &lt;method&gt;GET&lt;/method&gt;
  &lt;path&gt;/log/log.html&lt;/path&gt;
  &lt;path-info&gt;/examples/log/log.html&lt;/path-info&gt;
  &lt;path-translated&gt;D:\webapps\xslweb\examples\log\log.html&lt;/path-translated&gt;
  &lt;protocol&gt;HTTP/1.1&lt;/protocol&gt;
  &lt;remote-addr&gt;127.0.0.1&lt;/remote-addr&gt;
  &lt;remote-host&gt;127.0.0.1&lt;/remote-host&gt;
  &lt;remote-port&gt;55451&lt;/remote-port&gt;
  &lt;requested-session-id&gt;D5984A4C38D09BE74C04F1D89022AE90&lt;/requested-session-id&gt;
  &lt;request-URI&gt;/xslweb/examples/log/log.html&lt;/request-URI&gt;
  &lt;request-url&gt;http://localhost:8080/xslweb/examples/log/log.html&lt;/request-url&gt;
  &lt;scheme&gt;http&lt;/scheme&gt;
  &lt;server-name&gt;localhost&lt;/server-name&gt;
  &lt;server-port&gt;8080&lt;/server-port&gt;
  &lt;servlet-path/&gt;
  &lt;webapp-path&gt;/examples&lt;/webapp-path&gt;
  &lt;is-secure&gt;false&lt;/is-secure&gt;
  &lt;is-requested-session-id-from-cookie&gt;true&lt;/is-requested-session-id-from-cookie&gt;
  &lt;is-requested-session-id-from-url&gt;false&lt;/is-requested-session-id-from-url&gt;
  &lt;is-requested-session-id-valid&gt;true&lt;/is-requested-session-id-valid&gt;
  &lt;headers&gt;
    &lt;header name="host"&gt;localhost:8080&lt;/header&gt;
    &lt;header name="connection"&gt;keep-alive&lt;/header&gt;
    &lt;header name="accept"&gt;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&lt;/header&gt;
    &lt;header name="user-agent"&gt;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36&lt;/header&gt;
    &lt;header name="referer"&gt;http://localhost:8080/xslweb/examples&lt;/header&gt;
    &lt;header name="accept-encoding"&gt;gzip, deflate, sdch&lt;/header&gt;
    &lt;header name="accept-language"&gt;nl-NL,nl;q=0.8,en-US;q=0.6,en;q=0.4&lt;/header&gt;
    &lt;header name="cookie"&gt;JSESSIONID=D5984A4C38D09BE74C04F1D89022AE90&lt;/header&gt;
  &lt;/headers&gt;
  &lt;parameters&gt;
    &lt;parameter name="country"&gt;
      &lt;value&gt;US&lt;/value&gt;
    &lt;/parameter&gt;
    &lt;parameter name="states"&gt;
      &lt;value&gt;AZ&lt;/value&gt;
      &lt;value&gt;CA&lt;/value&gt;
    &lt;/parameter&gt;
  &lt;/parameters&gt;
  &lt;!-- If this request was a file upload POST request:
  &lt;file-uploads&gt;
    &lt;file-upload&gt;
      &lt;file-path&gt;C:\Users\John\AppData\Local\Temp\48226ce5-7bba-4986-8d1f-c4a8f34638cf\MyDocument1.docx&lt;/file-path&gt;
      &lt;field-name&gt;file1&lt;/field-name&gt;
      &lt;file-name&gt;MyDocument1.docx&lt;/file-name&gt;
      &lt;content-type&gt;application/vnd.openxmlformats-officedocument.wordprocessingml.document&lt;/content-type&gt;
      &lt;size&gt;177032&lt;/size&gt;
    &lt;/file-upload&gt;
  &lt;/file-uploads&gt;
  --&gt;
  &lt;session&gt;
    &lt;creation-time&gt;2015-01-06T13:06:04.925+01:00&lt;/creation-time&gt;
    &lt;id&gt;D5984A4C38D09BE74C04F1D89022AE90&lt;/id&gt;
    &lt;last-accessed-time&gt;2015-01-06T14:36:04.909+01:00&lt;/last-accessed-time&gt;
    &lt;max-inactive-interval&gt;1800&lt;/max-inactive-interval&gt;
    &lt;is-new&gt;false&lt;/is-new&gt;
  &lt;/session&gt;
  &lt;cookies&gt;
    &lt;cookie&gt;
      &lt;max-age&gt;-1&lt;/max-age&gt;
      &lt;name&gt;JSESSIONID&lt;/name&gt;
      &lt;is-secure&gt;false&lt;/is-secure&gt;
      &lt;value&gt;D5984A4C38D09BE74C04F1D89022AE90&lt;/value&gt;
      &lt;version&gt;0&lt;/version&gt;
    &lt;/cookie&gt;
  &lt;/cookies&gt;
&lt;/request&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-response-xml-example"><a class="anchor" href="#appendix-response-xml-example"></a><a class="link" href="#appendix-response-xml-example">15. Appendix B: Response XML example</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;resp:response
  xmlns:resp="http://www.armatiek.com/xslweb/response"
  status="200"&gt;
  &lt;resp:headers&gt;
    &lt;resp:header name="Pragma"&gt;no-cache&lt;/resp:header&gt;
    &lt;resp:int-header name="Expires"&gt;0&lt;/resp:int-header&gt;
    &lt;resp:date-header
      name="Last-Modified"&gt;2006-04-10T13:40:23.83-05:00&lt;/resp:date-header&gt;
  &lt;/resp:headers&gt;
  &lt;resp:session max-active-interval="1800"&gt;
    &lt;resp:attributes&gt;
      &lt;resp:attribute name="msg"&gt;
        &lt;item type="xs:string"&gt;Hello World&lt;/item&gt;
        &lt;item type="node()"&gt;
          &lt;msg&gt;Hello World!&lt;/msg&gt;
        &lt;/item&gt;
      &lt;/resp:attribute&gt;
    &lt;/resp:attributes&gt;
  &lt;/resp:session&gt;
  &lt;resp:cookies&gt;
    &lt;resp:cookie&gt;
      &lt;resp:comment&gt;Comment 1&lt;/resp:comment&gt;
      &lt;resp:domain&gt;localhost.com&lt;/resp:domain&gt;
      &lt;resp:max-age&gt;-1&lt;/resp:max-age&gt;
      &lt;resp:name&gt;cookie-1&lt;/resp:name&gt;
      &lt;resp:path&gt;/examples&lt;/resp:path&gt;
      &lt;resp:is-secure&gt;false&lt;/resp:is-secure&gt;
      &lt;resp:value&gt;cookie-1-value&lt;/resp:value&gt;
      &lt;resp:version&gt;0&lt;/resp:version&gt;
    &lt;/resp:cookie&gt;
  &lt;/resp:cookies&gt;
  &lt;resp:body&gt;
    &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
      &lt;head&gt;
        &lt;title&gt;Hello World!&lt;/title&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;h1&gt;Hello World&lt;/h1&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  &lt;/resp:body&gt;
&lt;/resp:response&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-webapp-xml-example"><a class="anchor" href="#appendix-webapp-xml-example"></a><a class="link" href="#appendix-webapp-xml-example">16. Appendix C: Webapp XML example</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;webapp
  xmlns="http://www.armatiek.com/xslweb/webapp"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.armatiek.com/xslweb/webapp
../../config/xsd/xslweb/webapp.xsd"&gt;

  &lt;title&gt;XSLWeb examples&lt;/title&gt;
  &lt;description&gt;XSLWeb examples&lt;/description&gt;
  &lt;development-mode&gt;true&lt;/development-mode&gt;

  &lt;!-- Resources to serve straight away: --&gt;
  &lt;resources&gt;
    &lt;resource pattern="/favicon.ico" media-type="image/x-icon"/&gt;
    &lt;resource
      pattern="/(styles|images)/.+\.png"
      media-type="image/png"
      duration="P7DT0H0M0S"/&gt;
    &lt;resource pattern="/(styles|images)/.+\.gif" media-type="image/gif"/&gt;
    &lt;resource pattern="/(styles|images)/.+\.(jpg|jpeg)" media-type="image/jpg"/&gt;
    &lt;resource pattern="/scripts/.+\.js" media-type="text/javascript"/&gt;
    &lt;resource pattern="/styles/.+\.css" media-type="text/css"/&gt;
    &lt;resource pattern="/downloads/.+\.docx?" media-type="application/msword"/&gt;
  &lt;/resources&gt;

  &lt;!-- Stylesheet parameters: --&gt;
  &lt;parameters&gt;
    &lt;parameter
      name="hostname"
      uri="http://www.armatiek.com/xslweb/functions/email"
      type="xs:string"&gt;
      &lt;value&gt;smtp.googlemail.com&lt;/value&gt;
    &lt;/parameter&gt;
    &lt;parameter
      name="port"
      uri="http://www.armatiek.com/xslweb/functions/email"
      type="xs:integer"&gt;
      &lt;value&gt;465&lt;/value&gt;
    &lt;/parameter&gt;
    &lt;parameter
      name="username"
      uri="http://www.armatiek.com/xslweb/functions/email"
      type="xs:string"&gt;
      &lt;value&gt;MYUSERNAME&lt;/value&gt;
    &lt;/parameter&gt;
    &lt;parameter
      name="password"
      uri="http://www.armatiek.com/xslweb/functions/email"
      type="xs:string"&gt;
      &lt;value&gt;MYPASSWORD&lt;/value&gt;
    &lt;/parameter&gt;
    &lt;parameter
      name="use-ssl"
      uri="http://www.armatiek.com/xslweb/functions/email"
      type="xs:boolean"&gt;
      &lt;value&gt;true&lt;/value&gt;
    &lt;/parameter&gt;
  &lt;/parameters&gt;

  &lt;!-- Scheduled job definitions: --&gt;
  &lt;jobs&gt;
    &lt;job&gt;
      &lt;name&gt;WriteTimeJob&lt;/name&gt;
      &lt;uri&gt;execute-writetime-job.html&lt;/uri&gt;
      &lt;!-- Execute every 60 seconds: --&gt;
      &lt;cron&gt;0/60 * * * * ?&lt;/cron&gt;
      &lt;concurrent&gt;true&lt;/concurrent&gt;
    &lt;/job&gt;
  &lt;/jobs&gt;
  &lt;datasources&gt;
    &lt;datasource&gt;
      &lt;name&gt;datasource-worldcup&lt;/name&gt;
      &lt;driver-class&gt;org.h2.Driver&lt;/driver-class&gt;
      &lt;jdbc-url&gt;jdbc:h2:file://${webapp-dir}/xsl/relational-database/worldcup.mv&lt;/jdbc-url&gt;
      &lt;property name="user"&gt;sa&lt;/property&gt;
    &lt;/datasource&gt;
  &lt;/datasources&gt;

&lt;/webapp&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-08-12 11:54:30 +0200
</div>
</div>
<link rel="stylesheet" href="highlight/styles/agate.min.css">
<script src="highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>